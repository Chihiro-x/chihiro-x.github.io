<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Python爬虫学习记录</title>
      <link href="/2020/06/21/python-pa-chong-xue-xi-ji-lu/"/>
      <url>/2020/06/21/python-pa-chong-xue-xi-ji-lu/</url>
      
        <content type="html"><![CDATA[<p>定义：网络爬虫是一种按照一定的规则，自动地抓取万维网信息的程序或者脚本。如果把互联网比喻成一张网，那么网络爬虫就可以认为是一个在网上爬来爬去的小虫子，它通过网页的链接地址来寻找网页，通过特定的搜索算法来确定路线，通常从网站的某一个页面开始，读取网页的内容，找到在网页中的其它链接地址，然后通过这些链接地址寻找下一个网页，这样一直循环下去，直到把这个网站所有网页都抓取完为止。</p><h2 id="爬虫过程"><a href="#爬虫过程" class="headerlink" title="爬虫过程"></a>爬虫过程</h2><p>下面的图片很好的展现了一般的网络爬虫的基本过程</p><p><img src="https://chihiro-x.github.io/picgo//images/script.png" alt="https://chihiro-x.github.io/picgo//images/script.png"></p><h2 id="发送请求"><a href="#发送请求" class="headerlink" title="发送请求"></a>发送请求</h2><h3 id="requests"><a href="#requests" class="headerlink" title="requests"></a>requests</h3><p>在Python中发起标准的HTTP请求</p><h4 id="发送请求-1"><a href="#发送请求-1" class="headerlink" title="发送请求"></a>发送请求</h4><p>首先导入requests模块</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> requests</code></pre><p><strong>GET请求</strong></p><pre class=" language-python"><code class="language-python">r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"http://192.168.31.54:222/login.php"</span><span class="token punctuation">)</span></code></pre><p><strong>POST请求</strong></p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> requestsdata <span class="token operator">=</span> <span class="token punctuation">{</span>    <span class="token string">"username"</span><span class="token punctuation">:</span> <span class="token string">"admin"</span><span class="token punctuation">,</span>    <span class="token string">"password"</span><span class="token punctuation">:</span> <span class="token string">"password"</span><span class="token punctuation">,</span>    <span class="token string">"Login"</span><span class="token punctuation">:</span> <span class="token string">"Login"</span><span class="token punctuation">,</span>    <span class="token string">"user_token"</span><span class="token punctuation">:</span> <span class="token string">"3370d41cf95f4e9b08360f5fe9316325"</span><span class="token punctuation">}</span>requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span><span class="token string">"http://192.168.31.54:222/login.php"</span><span class="token punctuation">,</span> data<span class="token operator">=</span>data<span class="token punctuation">)</span></code></pre><p><strong>其他HTTP请求</strong></p><pre class=" language-python"><code class="language-python">requests<span class="token punctuation">.</span>put<span class="token punctuation">(</span><span class="token string">'https://httpbin.org/put'</span><span class="token punctuation">,</span> data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'key'</span><span class="token punctuation">:</span><span class="token string">'value'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>requests<span class="token punctuation">.</span>delete<span class="token punctuation">(</span><span class="token string">'https://httpbin.org/delete'</span><span class="token punctuation">)</span>requests<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token string">'https://httpbin.org/get'</span><span class="token punctuation">)</span>requests<span class="token punctuation">.</span>options<span class="token punctuation">(</span><span class="token string">'https://httpbin.org/get'</span><span class="token punctuation">)</span></code></pre><h4 id="参数传递"><a href="#参数传递" class="headerlink" title="参数传递"></a>参数传递</h4><pre class=" language-python"><code class="language-python"><span class="token string">"直接将参数拼接在URL后面"</span>requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"http://192.168.31.54:222/Less-1?id=1"</span><span class="token punctuation">)</span><span class="token string">"使用关键字params,等同于http://192.168.31.54:222/Less-1?id=1"</span>requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"http://192.168.31.54:222/Less-1"</span><span class="token punctuation">,</span> params <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"id"</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token string">"使用data,以表单的形式传递参数（参数不会拼接到 URL 后面）"</span>requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span><span class="token string">"http://192.168.31.54:222/Less-1"</span><span class="token punctuation">,</span> data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"id"</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token string">"添加headers"</span>headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"User-Agent"</span><span class="token punctuation">:</span><span class="token string">"Mozilla/5.0"</span><span class="token punctuation">}</span>requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"http://192.168.31.54:222"</span><span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span></code></pre><h4 id="获取响应内容"><a href="#获取响应内容" class="headerlink" title="获取响应内容"></a>获取响应内容</h4><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> requestsre <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"https://www.sqlsec.com"</span><span class="token punctuation">)</span><span class="token string">"获取服务器响应文本内容"</span><span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token string">"获取服务器文本响应内容编码格式"</span><span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>encoding<span class="token punctuation">)</span><span class="token string">"获取字节响应内容"</span><span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>content<span class="token punctuation">)</span><span class="token string">"获取响应码"</span><span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>status_code<span class="token punctuation">)</span><span class="token string">"获取响应头"</span><span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>readers<span class="token punctuation">)</span></code></pre><h4 id="超时"><a href="#超时" class="headerlink" title="超时"></a>超时</h4><p>你可以告诉 requests 在经过以 <code>timeout</code> 参数设定的秒数时间之后停止等待响应。基本上所有的生产代码都应该使用这一参数。如果不使用，你的程序可能会永远失去响应：</p><pre class=" language-python"><code class="language-python">r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"http://chihiro-x.github.io"</span><span class="token punctuation">,</span> timeout<span class="token operator">=</span><span class="token number">0.01</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 如果在规定时间内没有连接到服务器就会报一个连接超时的错误</span><span class="token triple-quoted-string string">"""requests.exceptions.ConnectTimeout: HTTPConnectionPool(host='chihiro-x.github.io', port=80): Max"""</span></code></pre><h2 id="模拟登录"><a href="#模拟登录" class="headerlink" title="模拟登录"></a>模拟登录</h2><p>待补充</p><h2 id="解析网页"><a href="#解析网页" class="headerlink" title="解析网页"></a>解析网页</h2><h3 id="提取链接"><a href="#提取链接" class="headerlink" title="提取链接"></a>提取链接</h3><h4 id="URL获取"><a href="#URL获取" class="headerlink" title="URL获取"></a>URL获取</h4><p>爬虫当然不可能只爬取一页的数据，进行翻页获取数据。以豆瓣图书Top排行榜为例子，第一页的URL为<code>https://book.douban.com/top250</code>，第二页的URL为<code>https://book.douban.com/top250?start=25</code>两个做比较可以发现多了一个参数<code>start=25</code>。使用for循环来获取每页的链接。</p><pre class=" language-python"><code class="language-python">url <span class="token operator">=</span> <span class="token string">"https://book.douban.com/top250"</span><span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    url <span class="token operator">=</span> <span class="token string">"https://book.douban.com/top250?start="</span> <span class="token operator">+</span> str<span class="token punctuation">(</span>i<span class="token operator">*</span><span class="token number">25</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token triple-quoted-string string">"""https://book.douban.com/top250?start=0https://book.douban.com/top250?start=25https://book.douban.com/top250?start=50https://book.douban.com/top250?start=75https://book.douban.com/top250?start=100https://book.douban.com/top250?start=125"""</span></code></pre><h3 id="提取资源"><a href="#提取资源" class="headerlink" title="提取资源"></a>提取资源</h3><p>从Response里筛选内容，只获取自己需要的内容。</p><h4 id="re"><a href="#re" class="headerlink" title="re"></a>re</h4><p>在 Python 中，我们可以使用内置的 re 模块来使用正则表达式。</p><p><strong>常用的正则匹配速查表</strong></p><table><thead><tr><th align="center">字符</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center">\d</td><td align="center">代表任意数字，就是阿拉伯数字 0-9 这些玩意。</td></tr><tr><td align="center"><code>\D</code></td><td align="center">大写的就是和小写的唱反调，\d 你代表的是任意数字是吧？那么我 \D 就代表不是数字的。</td></tr><tr><td align="center"><code>\w</code></td><td align="center">代表字母，数字，下划线。也就是 a-z、A-Z、0-9、_。</td></tr><tr><td align="center"><code>\W</code></td><td align="center">跟 \w 唱反调，代表不是字母，不是数字，不是下划线的。</td></tr><tr><td align="center">\n</td><td align="center">代表一个换行。</td></tr><tr><td align="center"><code>\r</code></td><td align="center">代表一个回车。</td></tr><tr><td align="center"><code>\f</code></td><td align="center">代表换页。</td></tr><tr><td align="center"><code>\t</code></td><td align="center">代表一个 Tab 。</td></tr><tr><td align="center"><code>\s</code></td><td align="center">代表所有的空白字符，也就是上面这个：\n、\r、\t、\f。</td></tr><tr><td align="center"><code>\S</code></td><td align="center">跟 \s 唱反调，代表所有不是空白的字符。</td></tr><tr><td align="center"><code>\A</code></td><td align="center">代表字符串的开始。</td></tr><tr><td align="center"><code>\Z</code></td><td align="center">代表字符串的结束。</td></tr><tr><td align="center">^</td><td align="center">匹配字符串开始的位置。</td></tr><tr><td align="center">$</td><td align="center">匹配字符创结束的位置。</td></tr><tr><td align="center">.</td><td align="center">代表所有的单个字符，除了 \n \r</td></tr><tr><td align="center"><code>[...]</code></td><td align="center">代表在 [] 范围内的字符，比如 [a-z] 就代表 a到z的字母</td></tr><tr><td align="center"><code>[^...]</code></td><td align="center">跟 […] 唱反调，代表不在 [] 范围内的字符</td></tr><tr><td align="center">{n}</td><td align="center">匹配在 {n} 前面的东西，比如: o{2} 不能匹配 Bob 中的 o ，但是能匹配 food 中的两个o。</td></tr><tr><td align="center"><code>{n,m}</code></td><td align="center">匹配在 {n,m} 前面的东西，比如：o{1,3} 将匹配“fooooood”中的前三个o。</td></tr><tr><td align="center"><code>{n，}</code></td><td align="center">匹配在 {n,} 前面的东西，比如：o{2,} 不能匹配“Bob”中的“o”，但能匹配“foooood”中的所有o。</td></tr><tr><td align="center"><code>*</code></td><td align="center">和 {0,} 一个样，匹配 * 前面的 0 次或多次。 比如 zo* 能匹配“z”、“zo”以及“zoo”。</td></tr><tr><td align="center"><code>+</code></td><td align="center">和{1，} 一个样，匹配 + 前面 1 次或多次。 比如 zo+”能匹配“zo”以及“zoo”，但不能匹配“z”。</td></tr><tr><td align="center"><code>？</code></td><td align="center">和{0,1} 一个样，匹配 ？前面 0 次或 1 次。</td></tr><tr><td align="center">a|b</td><td align="center">匹配 a 或者 b。</td></tr><tr><td align="center"><code>（）</code></td><td align="center">匹配括号里面的内容。</td></tr></tbody></table><p><strong>re.match</strong></p><p>语法：</p><p><code>re.match(&#39;匹配规则&#39;,&#39;需要过滤的内容&#39;)</code></p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> recontent <span class="token operator">=</span> <span class="token string">"hello 123 python"</span>re <span class="token operator">=</span> re<span class="token punctuation">.</span>match<span class="token punctuation">(</span>r<span class="token string">"^he.*\s(\d+)\s(.*?n$)"</span><span class="token punctuation">,</span> content<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token triple-quoted-string string">"""&lt;re.Match object; span=(0, 16), match='hello 123 python'>hello 123 python123python"""</span></code></pre><p><strong>注：</strong><code>re.group(N)</code> 返回第N组括号匹配的字符，而<code>re.group() == re.group(0) == 所有匹配的字符</code>，<code>re.groups()</code>返回所有括号匹配的字符。</p><p><code>.*？</code>是我们在匹配过程中最常使用到的表示的就是匹配任意字符，但是<code>.*？</code>的 <code>.</code>代表所有的单个字符除了 <code>\n</code> 如果我们的字符串有换行了怎么办呢？这时候使用re.S,使 . 匹配包括换行在内的所有字符</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> recontent <span class="token operator">=</span> <span class="token triple-quoted-string string">"""hello 123 py thon"""</span>re <span class="token operator">=</span> re<span class="token punctuation">.</span>match<span class="token punctuation">(</span>r<span class="token string">"^he.*\s(\d+)\s(.*?n$)"</span><span class="token punctuation">,</span> content<span class="token punctuation">,</span> re<span class="token punctuation">.</span>S<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token triple-quoted-string string">"""hello 123 py thon123py thon"""</span><span class="token comment" spellcheck="true">#附带一个不使re.S执行的结果</span><span class="token triple-quoted-string string">"""Traceback (most recent call last):  File "/home/chihiro/Project/PyCharmProject/text.py", line 5, in &lt;module>    print(re.group())AttributeError: 'NoneType' object has no attribute 'group'"""</span></code></pre><p><strong>re.search</strong></p><p>直接去扫描字符串，然后把匹配成功的地一个结果返回给你。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> recontent <span class="token operator">=</span> <span class="token string">"hello 123 py thon"</span>re <span class="token operator">=</span> re<span class="token punctuation">.</span>search<span class="token punctuation">(</span>r<span class="token string">"^he.*\s(\d+)\s(.*?n$)"</span><span class="token punctuation">,</span> content<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 123</span></code></pre><p><strong>re.findall</strong></p><p>通过它我们就能轻松的获取所有匹配的内容了</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> recontent <span class="token operator">=</span> <span class="token triple-quoted-string string">"""hello 123 python;hello 456 python;hello 789 python;"""</span>res <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span>r<span class="token string">'he.*?(\d+)\s.*?n;'</span><span class="token punctuation">,</span> content<span class="token punctuation">,</span> re<span class="token punctuation">.</span>S<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># ['123', '456', '789']</span></code></pre><p><strong>re.sub</strong></p><p>把匹配到的内容替换为其他内容：<code>re.sub(&#39;匹配规则&#39;,&#39;替换为&#39;,&#39;待查找的内容&#39;)</code></p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> recontent <span class="token operator">=</span> <span class="token triple-quoted-string string">"""hello 123 python;hello 456 python;hello 789 python;"""</span>res <span class="token operator">=</span> re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span>r<span class="token string">'he.*?(\d+)\s.*?n;'</span><span class="token punctuation">,</span> <span class="token string">'999'</span><span class="token punctuation">,</span> content<span class="token punctuation">,</span> re<span class="token punctuation">.</span>S<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token triple-quoted-string string">"""999999999"""</span></code></pre><p><strong>re.compile</strong></p><p>这个主要就是把我们的匹配符封装一下</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> recontent <span class="token operator">=</span> <span class="token string">"hello 123 python"</span>pattern <span class="token operator">=</span> re<span class="token punctuation">.</span>compile<span class="token punctuation">(</span>r<span class="token string">"^he.*\s(\d+)\s.*on$"</span><span class="token punctuation">,</span> re<span class="token punctuation">.</span>S<span class="token punctuation">)</span>re <span class="token operator">=</span> re<span class="token punctuation">.</span>match<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> content<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 123</span></code></pre><h4 id="BeautifulSoup"><a href="#BeautifulSoup" class="headerlink" title="BeautifulSoup"></a>BeautifulSoup</h4><p>可以从HTML或XML文件中提取数据</p><p>随便一段代码，获取当中想要获取的东西</p><pre class=" language-html"><code class="language-html">html = """<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>你好Beautifulsoup<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>狗熊岭<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>www.taobao.com<span class="token punctuation">"</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>淘宝<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>狗熊<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>www.jindong.com<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>强哥<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>demo3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span>"""</code></pre><p>首先导入模块然后把HTML源码传给BeautifulSoup使用<code>lxml</code>进行解析，然后可以直接获取想要的内容</p><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoupsoup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>html<span class="token punctuation">,</span> <span class="token string">'lxml'</span><span class="token punctuation">)</span></code></pre><p>获取title标签下的内容</p><pre class=" language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>soup<span class="token punctuation">.</span>title<span class="token punctuation">.</span>string<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 你好Beautifulsoup</span></code></pre><p>获取p标签下的内容</p><pre class=" language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>soup<span class="token punctuation">.</span>p<span class="token punctuation">.</span>string<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 狗熊岭</span></code></pre><p>获取p标签下的所有内容(只查找第一个)</p><pre class=" language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># &lt;p class="text1">狗熊岭&lt;/p></span></code></pre><p>获取title的父级标签</p><pre class=" language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>soup<span class="token punctuation">.</span>title<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># head</span></code></pre><p>获取超链接</p><pre class=" language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>soup<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># &lt;a href="www.taobao.com" title="淘宝">狗熊&lt;/a></span></code></pre><p>获取所有超链接</p><pre class=" language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># [&lt;a href="www.taobao.com" title="淘宝">狗熊&lt;/a>, &lt;a href="www.jindong.com">强哥&lt;/a>]</span></code></pre><p>获取class为text2的p标签下的a标签下的内容</p><pre class=" language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span>class_<span class="token operator">=</span><span class="token string">'text2'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>string<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 狗熊</span></code></pre><p>获取a标签下的title属性值</p><pre class=" language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span>class_<span class="token operator">=</span><span class="token string">'text2'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 淘宝</span></code></pre><p><strong>其他</strong></p><p><code>.string</code>可以返回当前节点中的内容，但是当前节点包含子节点时，.string不知道要获取哪一个节点中的内容，故返回空</p><p><code>.text</code>（或者.get_text()）可以返回当前节点所包含的所有文本内容，包括当前节点的子孙节点</p><p>这里只是列举一些最基本使用方法，若要详细的学习请查阅「<a href="https://beautifulsoup.readthedocs.io/zh_CN/v4.4.0/" target="_blank" rel="noopener">BeautifulSoup</a>」。</p><h4 id="lxml"><a href="#lxml" class="headerlink" title="lxml"></a>lxml</h4><p>lxml是Python的一个解析库，支持HTML和XML的解析，支持xpath解析方式，而且解析效率非常高。xpath，全称XML  Path  Language，即XML路径语言，它是一门在XML文档中查找信息的语言，它最初是用来搜寻XML文档的，但是它同样适用于HTML文档的搜索。在谷歌浏览器上下载一个插件「XPath Helper」可以使用xpath语法来搜索指定内容，来确定搜索语句。在使用xpath来获取数据时，首先要了解文档节点关系。HTML文档中所有的节点组成啦一个文档树(或节点树)。HTML文档中的每个元素，属性，文本都到表着树中的一个节点。</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>节点树<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>www.taobao.com<span class="token punctuation">"</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>淘宝<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>狗熊<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>www.jindong.com<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>强哥<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>转换为节点树图为：(没研究过画图，凑胡着看吧)</p><p><img src="https://chihiro-x.github.io/picgo//images/%E8%8A%82%E7%82%B9%E5%9B%BE.png" alt=""></p><p><strong>节点之间的关系</strong></p><ul><li><p>父（Parent）</p><p>　　​       每个元素都肯定有一个父节点，最顶层的元素父亲是根节点。同理每个属性必然有一个父，它们的父是元素。 </p><p>​       例如以上代码中&lt;title&gt;的父节点是&lt;head&gt;，&lt;p&gt;的父节点是&lt;body&gt;</p></li><li><p>子（Children）</p><p>　　​        元素可以有零或多个子。 </p><p>​        例如以上代码中&lt;title&gt;是&lt;head&gt;的子节点，&lt;p&gt;是&lt;body&gt;的子节点       </p></li><li><p>同胞（Sibling）</p><p>　　​         父节点相同的节点之间互为同胞，也称彼此的兄弟节点。 </p><pre><code>　   例如两个\&lt;a&gt;是兄弟节点</code></pre></li><li><p>先辈（Ancestor）</p><p>​        某节点的父节点、父的父，以此类推一直追溯至根节点之间所有节点。</p></li><li><p>后代节点(Descendant)</p><p>　　 ​        某个节点的子节点，子的子</p></li></ul><p><strong>获取属性</strong></p><table><thead><tr><th align="left">表达式</th><th>描述</th></tr></thead><tbody><tr><td align="left">nodename</td><td>选取此节点的所有子节点</td></tr><tr><td align="left">/</td><td>从当前节点选取直接子节点</td></tr><tr><td align="left">//</td><td>从当前节点选取子孙节点</td></tr><tr><td align="left">.</td><td>选取当前节点</td></tr><tr><td align="left">..</td><td>选取当前节点的父节点</td></tr><tr><td align="left">@</td><td>选取属性</td></tr><tr><td align="left">*</td><td>匹配任何元素节点</td></tr><tr><td align="left">@*</td><td>匹配任何属性节点</td></tr></tbody></table><p><strong>获取文本</strong></p><table><thead><tr><th>表达式</th><th>描述</th></tr></thead><tbody><tr><td>a/text()</td><td>获取 a 下的文本</td></tr><tr><td>a//text()</td><td>获取 a 下所有元素的文本</td></tr><tr><td>//a[text()=’狗熊’]</td><td>获取文本狗熊的 a 元素</td></tr></tbody></table><p>从以下文本中获取内容</p><pre class=" language-html"><code class="language-html">text = """<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>节点树<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>狗熊岭<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>www.taobao.com<span class="token punctuation">"</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>淘宝<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>狗熊<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>www.jindong.com<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>强哥<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>demo3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span>"""</code></pre><p>首先导入模块，使用etree.HTML()进行解析，将字符串格式的html片段解析为html文档</p><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> lxml <span class="token keyword">import</span> etreehtml <span class="token operator">=</span> etree<span class="token punctuation">.</span>HTML<span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token string">"&lt;Element html at 0x7fb6fdce6740>"</span> <span class="token comment" spellcheck="true">#表明这是一个html文档</span></code></pre><p>获取title标签下的内容</p><pre class=" language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>html<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//title/text()'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># ['节点树']</span></code></pre><p>获取class属性值为text1的p标签下的内容</p><pre class=" language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>html<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//p[@class="text1"]/text()'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># ['狗熊岭']</span></code></pre><p>获取p标签下的所有内容，因为获取到的内容是列表格式，可以使用下表索引来获取内容</p><pre class=" language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>html<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//body/p//text()'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># ['狗熊岭', '\n    ', '狗熊', '\n    ', '强哥', '\n']</span><span class="token keyword">print</span><span class="token punctuation">(</span>html<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//body/p//text()'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 狗熊</span></code></pre><p>获取父级标签</p><pre class=" language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>html<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//title/..'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># [&lt;Element head at 0x7f066ca5a800>]</span></code></pre><p>获取所有超链接</p><pre class=" language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>html<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//a/@href'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># ['www.taobao.com', 'www.jindong.com']</span><span class="token keyword">print</span><span class="token punctuation">(</span>html<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//a/@href'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># www.jindong.com</span></code></pre><p>获取class为text2的p标签下的a标签下的内容</p><pre class=" language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>html<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//p[@class="text2"]/a//text()'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># ['狗熊', '强哥']</span></code></pre><p>获取a标签下的title属性值</p><pre class=" language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>html<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//a/@title'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># ['淘宝']</span></code></pre><p>这里只是列举一些最基本使用方法，若要详细的学习请查阅「<a href="https://lxml.de/" target="_blank" rel="noopener">lxml</a>」。</p><h2 id="储存资源"><a href="#储存资源" class="headerlink" title="储存资源"></a>储存资源</h2><p>把提取出来的数据储存到<code>TXT</code>文本文件，或<code>CSV</code>文件，或<code>Excel</code>，数据库等。。。</p><h3 id="TXT文件"><a href="#TXT文件" class="headerlink" title="TXT文件"></a>TXT文件</h3><p>在Python中实现文件的读写操作其实非常简单，通过Python内置的<code>open</code>函数，我们可以指定文件名、操作模式、编码信息等来获得操作文件的对象，接下来就可以对文件进行读写操作了。这里所说的操作模式是指要打开什么样的文件（字符文件还是二进制文件）以及做什么样的操作（读、写还是追加），具体的如下表所示。</p><table><thead><tr><th>操作模式</th><th>具体含义</th></tr></thead><tbody><tr><td><code>&#39;r&#39;</code></td><td>以只读方式打开文件。文件的指针将会放在文件的开头。这是默认模式。</td></tr><tr><td><code>&#39;w&#39;</code></td><td>打开一个文件只用于写入。如果该文件已存在则打开文件，并从开头开始编辑，即原有内容会被删除。如果该文件不存在，创建新文件。</td></tr><tr><td><code>&#39;x&#39;</code></td><td>写模式，新建一个文件，如果该文件已存在则会报错。</td></tr><tr><td><code>&#39;a&#39;</code></td><td>打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。也就是说，新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入。</td></tr><tr><td><code>&#39;b&#39;</code></td><td>二进制模式</td></tr><tr><td><code>&#39;t&#39;</code></td><td>文本模式（默认）</td></tr><tr><td><code>&#39;+&#39;</code></td><td>打开一个文件进行更新(可读可写)。</td></tr></tbody></table><p> <strong>open()</strong>方法用于打开一个文件，并返回文件对象，在对文件进行处理过程都需要使用到这个函数，如果该文件无法被打开，会抛出 <code>OSError</code>。</p><p><strong>注意：</strong>使用 open() 方法一定要保证关闭文件对象，即调用 close() 方法。文件使用完毕后必须关闭，因为文件对象会占用操作系统的资源，并且操作系统同一时间能打开的文件数量也是有限的。</p><p><code>open(&#39;文件路径&#39;,&#39;操作方式&#39;,encoding=&#39;字符编码&#39;)</code></p><h4 id="写入文件"><a href="#写入文件" class="headerlink" title="写入文件"></a>写入文件</h4><pre class=" language-python"><code class="language-python">f <span class="token operator">=</span> open<span class="token punctuation">(</span><span class="token string">'he.text'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span>f<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">"hello file"</span><span class="token punctuation">)</span>f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h4 id="读取文件"><a href="#读取文件" class="headerlink" title="读取文件"></a>读取文件</h4><pre class=" language-python"><code class="language-python">f <span class="token operator">=</span> open<span class="token punctuation">(</span><span class="token string">'he.text'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># hello file</span></code></pre><p>调用<strong>read()</strong>会一次性读取文件的全部内容，如果文件有10G，内存就爆了，所以，要保险起见，可以反复调用<strong>read(size)</strong>方法，每次最多读取size个字节的内容。另外，调用<strong>readline()</strong>可以每次读取一行内容，调用<strong>readlines()</strong>一次读取所有内容并按行返回<code>list</code>。因此，要根据需要决定怎么调用。</p><p><strong>read(size)</strong></p><pre class=" language-python"><code class="language-python">f <span class="token operator">=</span> open<span class="token punctuation">(</span><span class="token string">'he.text'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token string">"hello"</span></code></pre><p><strong>readline()</strong></p><p>每次读一行内容</p><pre class=" language-python"><code class="language-python">f <span class="token operator">=</span> open<span class="token punctuation">(</span><span class="token string">'he.text'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span>line <span class="token operator">=</span> f<span class="token punctuation">.</span>readline<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span>f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token triple-quoted-string string">"""hello file"""</span></code></pre><h4 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h4><p>以上的写法是最基本的写法，但是不能直接那样写，在对文件操作的时候，可能无权限，或文件不存在而抛出异常，脚本无法正常运行，所以我们要放进<code>try</code>语句中：</p><pre class=" language-python"><code class="language-python"><span class="token keyword">try</span><span class="token punctuation">:</span>    f <span class="token operator">=</span> open<span class="token punctuation">(</span><span class="token string">'he.text'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span>    f<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">"hello file"</span><span class="token punctuation">)</span><span class="token keyword">except</span> FileNotFoundError<span class="token punctuation">:</span>     <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'无法打开指定的文件!'</span><span class="token punctuation">)</span><span class="token keyword">except</span> LookupError<span class="token punctuation">:</span>     <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'指定了未知的编码!'</span><span class="token punctuation">)</span><span class="token keyword">except</span> UnicodeDecodeError<span class="token punctuation">:</span>     <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'读取文件时解码错误!'</span><span class="token punctuation">)</span><span class="token keyword">finally</span><span class="token punctuation">:</span>     <span class="token keyword">if</span> f<span class="token punctuation">:</span>       f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>但是这样写太麻烦，所以可以使用上下文语法，通过<code>with</code>关键字指定文件对象的上下文环境并在离开上下文环境时自动释放文件资源，代码如下所示。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">try</span><span class="token punctuation">:</span>    <span class="token keyword">with</span> open<span class="token punctuation">(</span><span class="token string">'xxx.txt'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>type<span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"操作失败"</span><span class="token punctuation">)</span><span class="token triple-quoted-string string">"""&lt;class 'FileNotFoundError'>操作失败"""</span></code></pre><h3 id="CSV文件"><a href="#CSV文件" class="headerlink" title="CSV文件"></a>CSV文件</h3><blockquote><p>在进行csv文件操作前首先来了解一下csv文件格式「百度百科」：<strong>逗号分隔值</strong>（Comma-Separated Values，<strong>CSV</strong>，有时也称为<strong>字符分隔值</strong>，因为分隔字符也可以不是逗号），其文件以纯文本形式存储表格数据（数字和文本）。纯文本意味着该文件是一个<a href="https://baike.baidu.com/item/字符/4768913" target="_blank" rel="noopener">字符</a>序列，不含必须像二进制数字那样被解读的数据。CSV文件由任意数目的记录组成，记录间以某种换行符分隔；每条记录由<a href="https://baike.baidu.com/item/字段/2885972" target="_blank" rel="noopener">字段</a>组成，字段间的分隔符是其它字符或字符串，最常见的是逗号或<a href="https://baike.baidu.com/item/制表符/7337607" target="_blank" rel="noopener">制表符</a>。通常，所有记录都有完全相同的字段序列。通常都是纯文本文件。建议使用WORDPAD或是记事本来开启，再则先另存新档后用EXCEL开启，也是方法之一。在python中使用<code>csv</code>模块，或<code>pandas</code>模块对csv文件进行操作。</p></blockquote><h4 id="csv模块"><a href="#csv模块" class="headerlink" title="csv模块"></a>csv模块</h4><p><strong>写入文件</strong></p><p>使用 <code>csv.writer</code>写入文件</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> csv<span class="token keyword">with</span> open<span class="token punctuation">(</span><span class="token string">'demo.csv'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>    write <span class="token operator">=</span> csv<span class="token punctuation">.</span>writer<span class="token punctuation">(</span>f<span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># 首先写入columns_name</span>    write<span class="token punctuation">.</span>writerow<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'姓名'</span><span class="token punctuation">,</span> <span class="token string">'学号'</span><span class="token punctuation">,</span> <span class="token string">'成绩'</span><span class="token punctuation">,</span> <span class="token string">'性别'</span><span class="token punctuation">,</span> <span class="token string">'年龄'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># 然后写入数据,写入多行使用writerows</span>    write<span class="token punctuation">.</span>writerow<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'灰太郎'</span><span class="token punctuation">,</span> <span class="token number">2008</span><span class="token punctuation">,</span> <span class="token number">68</span><span class="token punctuation">,</span> <span class="token string">'男'</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    write<span class="token punctuation">.</span>writerows<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'美羊羊'</span><span class="token punctuation">,</span> <span class="token number">2186</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token string">'女'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'喜羊羊'</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token string">'男'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre><p><strong>读取文件</strong></p><p>使用<code>csv.reader</code>来读取文件</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> csv<span class="token keyword">with</span> open<span class="token punctuation">(</span><span class="token string">'demo.csv'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>    read <span class="token operator">=</span> csv<span class="token punctuation">.</span>reader<span class="token punctuation">(</span>f<span class="token punctuation">)</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> read<span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token triple-quoted-string string">"""['姓名', '学号', '成绩', '性别', '年龄']['灰太郎', '2008', '68', '男', '26']['美羊羊', '2186', '80', '女', '18']['喜羊羊', '2000', '90', '男', '18']"""</span></code></pre><p>使用表格工具打开如下</p><p><img src="https://chihiro-x.github.io/picgo//images/table1.png" alt="https://chihiro-x.github.io/picgo//images/table1.png"></p><h4 id="pandas模块"><a href="#pandas模块" class="headerlink" title="pandas模块"></a>pandas模块</h4><p><strong>读取文件</strong></p><p>使用<code>pandas.read_csv()</code>读取文件</p><p><strong>常用参数</strong></p><ul><li>header    header默认为0，表示第一行是表头，如果header设置为None表示没有表头</li><li>index：是否输出索引，默认True</li><li>sep：设置分隔符，默认”,”</li></ul><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> pandasz <span class="token operator">=</span> pandas<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'demo.csv'</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>z<span class="token punctuation">)</span><span class="token triple-quoted-string string">"""   姓名    学号  成绩 性别  年龄0  灰太郎  2008  68  男  261  美羊羊  2186  80  女  182  喜羊羊  2000  90  男  18"""</span></code></pre><p><strong>写入文件</strong></p><p>使用<code>to_csv</code>来写入文件</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> pandasname <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'光头强'</span><span class="token punctuation">,</span> <span class="token string">'喜羊羊'</span><span class="token punctuation">,</span> <span class="token string">'美羊羊'</span><span class="token punctuation">]</span>age <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">]</span>x <span class="token operator">=</span> <span class="token punctuation">{</span>    <span class="token string">'姓名'</span><span class="token punctuation">:</span> name<span class="token punctuation">,</span>    <span class="token string">'年龄'</span><span class="token punctuation">:</span> age<span class="token punctuation">}</span>z <span class="token operator">=</span> pandas<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>x<span class="token punctuation">)</span>z<span class="token punctuation">.</span>to_csv<span class="token punctuation">(</span><span class="token string">'demo.csv'</span><span class="token punctuation">)</span></code></pre><h3 id="Excel表格"><a href="#Excel表格" class="headerlink" title="Excel表格"></a>Excel表格</h3><p>待补充</p><h3 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h3><p>待补充</p><h2 id="线程，进程"><a href="#线程，进程" class="headerlink" title="线程，进程"></a>线程，进程</h2><h3 id="概念"><a href="#概念" class="headerlink" title="概念"></a><strong>概念</strong></h3><p>阮一峰的博客曾对进程和线程做出了一个非常浅显的解释：</p><ul><li>计算机的核心是CPU，它承担了所有的计算任务。它就像一个工厂时刻在运行着。</li><li>假定工厂的电力有限，一次只能供给一个车间使用，也就是当一个车间开工的时候，其他车间必须停工。「单个CPU一次只能运行一个任务」</li><li>进程就好比车间，它代表CPU所能处理的单个任务。任何时刻，CPU总是运行一个进程，其他进程处于非运行状态。</li><li>一个车间里可以有很多工人，他们协同完成一个任务。「线程就好比工人，一个进程可以包含多个线程」</li><li>车间的空间是共享的，比如有许多房间是每个工人够可以进出的「一个进程的内存空间是共享的，每个线程都可以使用这些共享内存」</li><li>但是每个房间大小不同，只能容纳一个人，比如厕所。里面有人的时候其他人就不能进去。「一个线程使用某些共享内存的时候，其他线程必须等他结束，才能使用这一块内存」</li><li>一个防止他人进去的简单办法就是在门口加一把锁，先到的人锁上门，后到的人看到锁就会在门口排队。等锁打开在进去。这就叫<code>互斥锁</code>（Mutual exclusion，缩写 Mutex），防止多个线程同时读写某一块内存区域。</li><li>还有些房间，可以同时容纳n个人，比如厨房。也就是说，如果人数大于n，多出来的人只能在外面等着。这好比某些内存区域，只能供给固定数目的线程使用。</li><li>这时的解决方法，就是在门口挂n把钥匙。进去的人就取一把钥匙，出来时再把钥匙挂回原处。后到的人发现钥匙架空了，就知道必须在门口排队等着了。这种做法叫做<a href="http://en.wikipedia.org/wiki/Semaphore_(programming)" target="_blank" rel="noopener">“信号量”</a>（Semaphore），用来保证多个线程不会互相冲突。</li></ul><p><strong>原文地址：</strong><a href="https://www.ruanyifeng.com/blog/2013/04/processes_and_threads.html" target="_blank" rel="noopener">https://www.ruanyifeng.com/blog/2013/04/processes_and_threads.html</a></p><p>了解线程进程的相关概念时，多线程，多进程就好理解啦。「鄙人不才」还是以上面的例子进行浅显的解释</p><ul><li><strong>多进程：</strong>此时工厂赚到钱啦，可以买多些的电力「换一个4核的CPU」，就可以同时给4个车间供电，4个车间可以同时工作。</li><li><strong>多线程：</strong>工人们同步完成多项任务。</li><li><strong>并发：</strong>一个工人要同时做三件事情，识别歌曲，识别影视，观察机器</li></ul><p><img src="https://chihiro-x.github.io/picgo//images/cpu1.png" alt="https://chihiro-x.github.io/picgo//images/cpu1.png"></p><ul><li><strong>并行：</strong>分三个工人同时做，工人1识别歌曲，工人2识别影视，工人3观察机器</li></ul><p><img src="https://chihiro-x.github.io/picgo/images/cpu2.png" alt="https://chihiro-x.github.io/picgo//images/cpu2.png"></p><h3 id="实现多进程，多线程"><a href="#实现多进程，多线程" class="headerlink" title="实现多进程，多线程"></a>实现多进程，多线程</h3><p>在python中使用<strong>threading</strong>模块来实现多线程，</p><p>使用<strong>multiprocessing</strong>实现多进程，</p><p>使用<strong>concurrent.futures</strong>实现进程池/线程池，</p><p><strong>注：</strong>因为频繁的创建线程进程销毁线程进程，非常的浪费资源，应该把他们放到一个池子里，通过这个池子就可以重复的利用，不会造成过多的资源浪费。「线程池，进程池」</p><h2 id="爬虫反爬"><a href="#爬虫反爬" class="headerlink" title="爬虫反爬"></a>爬虫反爬</h2><p>待补充</p><h2 id="爬虫实例"><a href="#爬虫实例" class="headerlink" title="爬虫实例"></a>爬虫实例</h2><h3 id="豆瓣图书Top200"><a href="#豆瓣图书Top200" class="headerlink" title="豆瓣图书Top200"></a>豆瓣图书Top200</h3><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> csv<span class="token keyword">import</span> re<span class="token keyword">import</span> requests<span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup<span class="token keyword">from</span> lxml <span class="token keyword">import</span> etree<span class="token comment" spellcheck="true"># 发起请求，获取响应内容</span><span class="token keyword">def</span> <span class="token function">get_response</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">:</span>    headers <span class="token operator">=</span> <span class="token punctuation">{</span>        <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> 'Mozilla<span class="token operator">/</span><span class="token number">5.0</span> <span class="token punctuation">(</span>X11<span class="token punctuation">;</span> Linux x86_64<span class="token punctuation">)</span> AppleWebKit<span class="token operator">/</span>\        <span class="token number">537.36</span> <span class="token punctuation">(</span>KHTML<span class="token punctuation">,</span> like Gecko<span class="token punctuation">)</span> Chrome<span class="token operator">/</span><span class="token number">83.0</span><span class="token punctuation">.</span><span class="token number">4103.61</span> Safari<span class="token operator">/</span><span class="token number">537.36</span>'    <span class="token punctuation">}</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>        <span class="token keyword">if</span> response<span class="token punctuation">.</span>status_code <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> response<span class="token punctuation">.</span>text    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'获取失败'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 使用re获取数据，只是一个示例</span><span class="token comment" spellcheck="true"># def parse_result(html):</span><span class="token comment" spellcheck="true">#     book_score = re.findall('&lt;span class="rating_nums">(.*?)&lt;/span>', html, re.S)</span><span class="token comment" spellcheck="true">#     book_description = re.findall('&lt;span class="inq">(.*?)&lt;/span>', html, re.S)</span><span class="token comment" spellcheck="true">#     print(book_score + book_description)</span><span class="token comment" spellcheck="true"># 使用BeautifulSoup获取数据</span><span class="token keyword">def</span> <span class="token function">parse_result</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">:</span>    soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>html<span class="token punctuation">,</span> <span class="token string">'lxml'</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> book <span class="token keyword">in</span> soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span>class_<span class="token operator">=</span><span class="token string">'indent'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">'table'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        book_name <span class="token operator">=</span> book<span class="token punctuation">.</span>find<span class="token punctuation">(</span>class_<span class="token operator">=</span><span class="token string">'pl2'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">)</span>        book_score <span class="token operator">=</span> book<span class="token punctuation">.</span>find<span class="token punctuation">(</span>class_<span class="token operator">=</span><span class="token string">'rating_nums'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>string        book_description <span class="token operator">=</span> book<span class="token punctuation">.</span>find<span class="token punctuation">(</span>class_<span class="token operator">=</span><span class="token string">'inq'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>string        <span class="token keyword">yield</span> <span class="token punctuation">[</span>book_name<span class="token punctuation">,</span> book_score<span class="token punctuation">,</span> book_description<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># 使用xpath提取数据</span><span class="token comment" spellcheck="true"># def parse_result(html):</span><span class="token comment" spellcheck="true">#     item = etree.HTML(html)</span><span class="token comment" spellcheck="true">#     book_name = item.xpath('//div[@class="pl2"]//a/@title')</span><span class="token comment" spellcheck="true">#     book_score = item.xpath('//span[@class="rating_nums"]/text()')</span><span class="token comment" spellcheck="true">#     book_description = item.xpath('//span[@class="inq"]/text()')</span><span class="token comment" spellcheck="true">#     print(book_description)</span><span class="token comment" spellcheck="true"># 储存到txt格式的文件里</span><span class="token keyword">def</span> <span class="token function">save_txt</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        <span class="token keyword">with</span> open<span class="token punctuation">(</span><span class="token string">'demo.txt'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>            <span class="token keyword">for</span> i <span class="token keyword">in</span> content<span class="token punctuation">:</span>                f<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">"书名："</span> <span class="token operator">+</span> i<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'   '</span> <span class="token operator">+</span> <span class="token string">"评分："</span> <span class="token operator">+</span> i<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span>\                        <span class="token string">'   '</span> <span class="token operator">+</span> <span class="token string">"描述："</span> <span class="token operator">+</span> i<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'\n'</span><span class="token punctuation">)</span>    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"下载失败"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 储存到csv格式的文件里</span><span class="token keyword">def</span> <span class="token function">save_csv</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        <span class="token keyword">with</span> open<span class="token punctuation">(</span><span class="token string">'demo.csv'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>            write <span class="token operator">=</span> csv<span class="token punctuation">.</span>writer<span class="token punctuation">(</span>f<span class="token punctuation">)</span>            write<span class="token punctuation">.</span>writerow<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'书名'</span><span class="token punctuation">,</span> <span class="token string">'评分'</span><span class="token punctuation">,</span> <span class="token string">'描述'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">for</span> i <span class="token keyword">in</span> content<span class="token punctuation">:</span>                write<span class="token punctuation">.</span>writerow<span class="token punctuation">(</span><span class="token punctuation">[</span>i<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"下载失败"</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">:</span>    url <span class="token operator">=</span> <span class="token string">'https://book.douban.com/top250?start='</span> <span class="token operator">+</span> str<span class="token punctuation">(</span>i <span class="token operator">*</span> <span class="token number">25</span><span class="token punctuation">)</span>    html <span class="token operator">=</span> get_response<span class="token punctuation">(</span>url<span class="token punctuation">)</span>    books <span class="token operator">=</span> parse_result<span class="token punctuation">(</span>html<span class="token punctuation">)</span>    save_txt<span class="token punctuation">(</span>books<span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># save_csv(books)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        main<span class="token punctuation">(</span>i<span class="token punctuation">)</span></code></pre><p>使用多进程爬取豆瓣图书数据</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 稍微修改一下,0.6秒全部爬取完成，没有使用多进程全部爬取完成时间是2.2秒</span><span class="token keyword">def</span> <span class="token function">parse_result</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">:</span>    soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>html<span class="token punctuation">,</span> <span class="token string">'lxml'</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> book <span class="token keyword">in</span> soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span>class_<span class="token operator">=</span><span class="token string">'indent'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">'table'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        book_name <span class="token operator">=</span> book<span class="token punctuation">.</span>find<span class="token punctuation">(</span>class_<span class="token operator">=</span><span class="token string">'pl2'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">)</span>        book_score <span class="token operator">=</span> book<span class="token punctuation">.</span>find<span class="token punctuation">(</span>class_<span class="token operator">=</span><span class="token string">'rating_nums'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>string        book_description <span class="token operator">=</span> book<span class="token punctuation">.</span>find<span class="token punctuation">(</span>class_<span class="token operator">=</span><span class="token string">'inq'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>string        <span class="token keyword">print</span><span class="token punctuation">(</span>book_name <span class="token operator">+</span> book_score <span class="token operator">+</span> book_description<span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">:</span>    html <span class="token operator">=</span> get_response<span class="token punctuation">(</span>url<span class="token punctuation">)</span>    parse_result<span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    start <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>    urls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        url <span class="token operator">=</span> <span class="token string">'https://book.douban.com/top250?start='</span> <span class="token operator">+</span> str<span class="token punctuation">(</span>i <span class="token operator">*</span> <span class="token number">25</span><span class="token punctuation">)</span>        urls<span class="token punctuation">.</span>append<span class="token punctuation">(</span>url<span class="token punctuation">)</span>    <span class="token keyword">with</span> multiprocessing<span class="token punctuation">.</span>Pool<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token keyword">as</span> pool<span class="token punctuation">:</span>        pool<span class="token punctuation">.</span>map<span class="token punctuation">(</span>main<span class="token punctuation">,</span> urls<span class="token punctuation">)</span>    end <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>end <span class="token operator">-</span> start<span class="token punctuation">)</span></code></pre><h2 id="数据分析"><a href="#数据分析" class="headerlink" title="数据分析"></a>数据分析</h2><p>待补充</p><h2 id="零散知识点"><a href="#零散知识点" class="headerlink" title="零散知识点"></a>零散知识点</h2><h3 id="try语句"><a href="#try语句" class="headerlink" title="try语句"></a>try语句</h3><p>用来处理异常，运行代码时有时会出现各种各样的错误，致使解析器中断执行，并提示xxxxxxErorr的提示，后面跟具体的错误的描述，这被称为是引发了异常。其实异常告诉我们的是遇到了什么类型的错误。xxxxErorr就是python内置的异常类型。每一种异常类型，都有它自己的错误信息。出现异常程序终止。其它有些异常类型不影响代码的功能，而又不想让异常中断执行时，就要对异常进行处理，而不让他中断程序：</p><p>例如：有一个字典里面存放光头强的信息，想取到它的资料，但具体都有什么资料我们不知道，如果输入的键不存在就会引发异常而中断执行。致使后面的代码也为无法执行。</p><pre class=" language-python"><code class="language-python">information <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'光头强'</span><span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">:</span> <span class="token string">'20'</span><span class="token punctuation">,</span> <span class="token string">'gender'</span><span class="token punctuation">:</span> <span class="token string">'男'</span><span class="token punctuation">}</span><span class="token keyword">print</span><span class="token punctuation">(</span>information<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>information<span class="token punctuation">[</span><span class="token string">'sex'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>information<span class="token punctuation">[</span><span class="token string">'age'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token triple-quoted-string string">"""光头强Traceback (most recent call last):  File "/home/chihiro/Project/PyCharmProject/text.py", line 3, in &lt;module>    print(information['sex'])KeyError: 'sex'"""</span></code></pre><p>那么就要捕获这些异常，绕过它，能让下面的代码继续运行。python提供了try语句来实现这些功能。</p><p>语法：</p><pre class=" language-python"><code class="language-python"><span class="token keyword">try</span><span class="token punctuation">:</span>    可能发生异常的代码<span class="token keyword">except</span> 异常类型：    捕获的异常后要执行的代码</code></pre><p><strong>示例：</strong></p><pre class=" language-python"><code class="language-python">information <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'光头强'</span><span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">:</span> <span class="token string">'20'</span><span class="token punctuation">,</span> <span class="token string">'gender'</span><span class="token punctuation">:</span> <span class="token string">'男'</span><span class="token punctuation">}</span><span class="token keyword">try</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>information<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>information<span class="token punctuation">[</span><span class="token string">'sex'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">except</span> KeyError<span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"sex不存在"</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>information<span class="token punctuation">[</span><span class="token string">'age'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token triple-quoted-string string">"""运行结果光头强sex不存在20"""</span></code></pre><p><strong>捕获所有异常</strong>：</p><p>引发异常的xxxxErorr都是python异常的类型。python中所有异常类型都是基类Exception的基类。那么在写代码的时候不用指定异常的具体类型，只要捕获基类就等于捕获了所有的异常，但输出的是具体的异常信息，这很有利于在大范围内找到具体的错误。也就是你不知道会产生什么样的错误类型，Exception是万能的。</p><p>示例：</p><pre class=" language-python"><code class="language-python">information <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'光头强'</span><span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">:</span> <span class="token string">'20'</span><span class="token punctuation">,</span> <span class="token string">'gender'</span><span class="token punctuation">:</span> <span class="token string">'男'</span><span class="token punctuation">}</span><span class="token keyword">try</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>information<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>information<span class="token punctuation">[</span><span class="token string">'sex'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>type<span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"sex不存在"</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>information<span class="token punctuation">[</span><span class="token string">'age'</span><span class="token punctuation">]</span><span class="token triple-quoted-string string">"""运行结果光头强&lt;class 'KeyError'>sex不存在20"""</span></code></pre><p><strong>异常里的else子句</strong>：</p><p>else子句是可选的，如果使用，必须放在所有的except子句之后。它是在try子句没有发生异常的情况执行。</p><pre class=" language-python"><code class="language-python">information <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'光头强'</span><span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">:</span> <span class="token string">'20'</span><span class="token punctuation">,</span> <span class="token string">'gender'</span><span class="token punctuation">:</span> <span class="token string">'男'</span><span class="token punctuation">}</span><span class="token keyword">try</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>information<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>type<span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">else</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"光头强是伐木工"</span><span class="token punctuation">)</span><span class="token triple-quoted-string string">"""运行结果光头强光头强是伐木工"""</span></code></pre><p><strong>finally子句</strong> </p><p>写在try语句的最后。不管 try 子句里面是否有异常，finally 子句都会执行。</p><pre class=" language-python"><code class="language-python">information <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'光头强'</span><span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">:</span> <span class="token string">'20'</span><span class="token punctuation">,</span> <span class="token string">'gender'</span><span class="token punctuation">:</span> <span class="token string">'男'</span><span class="token punctuation">}</span><span class="token keyword">try</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>information<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>information<span class="token punctuation">[</span><span class="token string">'sex'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>type<span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"sex不存在"</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>information<span class="token punctuation">[</span><span class="token string">'age'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">finally</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"调研结束"</span><span class="token punctuation">)</span><span class="token triple-quoted-string string">"""运行结果光头强&lt;class 'KeyError'>sex不存在20调研结束"""</span></code></pre><h3 id="yield"><a href="#yield" class="headerlink" title="yield"></a>yield</h3><h2 id="模块学习"><a href="#模块学习" class="headerlink" title="模块学习"></a>模块学习</h2><h3 id="threading"><a href="#threading" class="headerlink" title="threading"></a>threading</h3><p>多线程操作模块</p><p><strong>官方文档：</strong><a href="https://docs.python.org/3/library/threading.html" target="_blank" rel="noopener">https://docs.python.org/3/library/threading.html</a></p><h4 id="Thread"><a href="#Thread" class="headerlink" title="Thread"></a>Thread</h4><p>Thread 类提供了如下的 <code>__init__()</code> 构造器，可以用来创建线程：<code>__init__(self, group=None, target=None, name=None, args=(), kwargs=None, *,daemon=None)</code></p><table><thead><tr><th>参数名</th><th>含义</th></tr></thead><tbody><tr><td>target</td><td>线程调用的对象，就是目标函数</td></tr><tr><td>name</td><td>为线程起一个名字(线程的名字)如果没有赋值，默认为“Thread-N” 的形式</td></tr><tr><td>args</td><td>为目标函数传递实参，元组</td></tr><tr><td>kwargs</td><td>为目标函数传递关键字参数，字典</td></tr></tbody></table><p><strong>常用方法</strong></p><ul><li><strong>run():</strong> 用以表示线程活动的方法。</li><li><strong>start()</strong>:启动线程活动。</li><li><strong>join([time]):</strong> 等待至线程中止。这阻塞调用线程直至线程的join() 方法被调用中止-正常退出或者抛出未处理的异常-或者是可选的超时发生。</li><li><strong>isAlive():</strong> 返回线程是否活动的。</li><li><strong>getName():</strong> 返回线程名。</li><li><strong>setName():</strong> 设置线程名。</li></ul><p>直接创建 Thread ，将一个 callable 对象从类的构造器传递进去，这个 callable 就是回调函数，用来处理任务。比如以下例子，雇佣俩工人，在同一时间做不同的事情</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> threading<span class="token keyword">import</span> time<span class="token keyword">def</span> <span class="token function">zuofan_time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"小红在%s做饭"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">"%H点%M分%S秒"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">xiyi_time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"小芳正在%s洗衣服"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">"%H点%M分%S秒"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    mythread1 <span class="token operator">=</span> threading<span class="token punctuation">.</span>Thread<span class="token punctuation">(</span>target<span class="token operator">=</span>zuofan_time<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># 创建线程</span>    mythread2 <span class="token operator">=</span> threading<span class="token punctuation">.</span>Thread<span class="token punctuation">(</span>target<span class="token operator">=</span>xiyi_time<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># 创建线程</span>    mythread1<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#启动线程</span>    mythread2<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#启动线程</span><span class="token triple-quoted-string string">"""小红在13点08分07秒做饭小芳正在13点08分07秒洗衣服小红在13点08分08秒做饭小芳正在13点08分08秒洗衣服小红在13点08分09秒做饭小芳正在13点08分09秒洗衣服小芳正在13点08分10秒洗衣服小红在13点08分10秒做饭"""</span></code></pre><p>通过继承 Thread 类，我们可以自定义一个线程类，从而实例化该类对象，获得子线程。需要注意的是，在创建 Thread 类的子类时，必须重写从父类继承得到的 run() 方法。因为该方法即为要创建的子线程执行的方法，其功能如同第一种创建方法中的 action() 自定义函数。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> threading<span class="token keyword">import</span> time<span class="token keyword">class</span> <span class="token class-name">Mythread</span><span class="token punctuation">(</span>threading<span class="token punctuation">.</span>Thread<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment" spellcheck="true"># 继承threading.Thread</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">:</span>        threading<span class="token punctuation">.</span>Thread<span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># 保留原来threading.Thread中的初始化函数</span>        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name        self<span class="token punctuation">.</span>delay <span class="token operator">=</span> delay    <span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment" spellcheck="true"># 重写run方法</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"线程开始："</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>name<span class="token punctuation">)</span>        zuofan_time<span class="token punctuation">(</span>self<span class="token punctuation">.</span>name<span class="token punctuation">,</span> self<span class="token punctuation">.</span>delay<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"线程结束："</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">zuofan_time</span><span class="token punctuation">(</span>threadname<span class="token punctuation">,</span> delay<span class="token punctuation">,</span> counter<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">while</span> counter<span class="token punctuation">:</span>        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span>delay<span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"%s开始做饭--%s"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>threadname<span class="token punctuation">,</span> time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">"%H点%M分%S秒"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        counter <span class="token operator">-=</span> <span class="token number">1</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    td1 <span class="token operator">=</span> Mythread<span class="token punctuation">(</span><span class="token string">"小红"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#小红歇息一秒然后继续做饭</span>    td2 <span class="token operator">=</span> Mythread<span class="token punctuation">(</span><span class="token string">"小芳"</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#小芳歇息两秒然后继续做饭</span>    td1<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>    td2<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token triple-quoted-string string">"""线程开始：小红线程开始：小芳小红开始做饭--16点46分02秒小芳开始做饭--16点46分03秒小红开始做饭--16点46分03秒小红开始做饭--16点46分04秒小红开始做饭--16点46分05秒小芳开始做饭--16点46分05秒小红开始做饭--16点46分06秒线程结束：小红小芳开始做饭--16点46分07秒小芳开始做饭--16点46分09秒小芳开始做饭--16点46分11秒线程结束：小芳"""</span></code></pre><h3 id="multiprocessing"><a href="#multiprocessing" class="headerlink" title="multiprocessing"></a>multiprocessing</h3><p>多进程操作模块，对多核CPU的利用率比Thread要好。</p><p><strong>官方文档：</strong><a href="https://docs.python.org/zh-cn/3/library/multiprocessing.html" target="_blank" rel="noopener">https://docs.python.org/zh-cn/3/library/multiprocessing.html</a></p><h4 id="Process"><a href="#Process" class="headerlink" title="Process"></a>Process</h4><p>Process 对象与 Thread 对象的用法相同。直接看例子吧，直接进行创建！</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> multiprocessing<span class="token keyword">import</span> time<span class="token keyword">def</span> <span class="token function">zuofan_time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"小红在%s做饭"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">"%H点%M分%S秒"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">xiyi_time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"小芳正在%s洗衣服"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">"%H点%M分%S秒"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    mythread1 <span class="token operator">=</span> multiprocessing<span class="token punctuation">.</span>Process<span class="token punctuation">(</span>target<span class="token operator">=</span>zuofan_time<span class="token punctuation">)</span>    mythread2 <span class="token operator">=</span> multiprocessing<span class="token punctuation">.</span>Process<span class="token punctuation">(</span>target<span class="token operator">=</span>xiyi_time<span class="token punctuation">)</span>    mythread1<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>    mythread2<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token triple-quoted-string string">"""小红在18点48分19秒做饭小芳正在18点48分19秒洗衣服小红在18点48分20秒做饭小芳正在18点48分21秒洗衣服小红在18点48分22秒做饭小芳正在18点48分22秒洗衣服小红在18点48分23秒做饭小芳正在18点48分23秒洗衣服 """</span></code></pre><p>创建子类，继承父类（Process），重写Run方法</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> multiprocessing<span class="token keyword">import</span> time<span class="token keyword">class</span> <span class="token class-name">Myprocess</span><span class="token punctuation">(</span>multiprocessing<span class="token punctuation">.</span>Process<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">:</span>        multiprocessing<span class="token punctuation">.</span>Process<span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>self<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name        self<span class="token punctuation">.</span>delay <span class="token operator">=</span> delay    <span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment" spellcheck="true"># 重写run方法</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"进程开始："</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>name<span class="token punctuation">)</span>        zuofan_time<span class="token punctuation">(</span>self<span class="token punctuation">.</span>name<span class="token punctuation">,</span> self<span class="token punctuation">.</span>delay<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"进程结束："</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">zuofan_time</span><span class="token punctuation">(</span>processname<span class="token punctuation">,</span> delay<span class="token punctuation">,</span> counter<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">while</span> counter<span class="token punctuation">:</span>        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span>delay<span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"%s开始做饭--%s"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>processname<span class="token punctuation">,</span> time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">"%H点%M分%S秒"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        counter <span class="token operator">-=</span> <span class="token number">1</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    td1 <span class="token operator">=</span> Myprocess<span class="token punctuation">(</span><span class="token string">"小红"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#小红歇息一秒然后继续做饭</span>    td2 <span class="token operator">=</span> Myprocess<span class="token punctuation">(</span><span class="token string">"小芳"</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#小芳歇息两秒然后继续做饭</span>    td1<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>    td2<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token triple-quoted-string string">"""进程开始：小红进程开始：小芳小红开始做饭--18点56分26秒小红开始做饭--18点56分27秒小芳开始做饭--18点56分27秒小红开始做饭--18点56分28秒小红开始做饭--18点56分29秒小芳开始做饭--18点56分29秒小红开始做饭--18点56分30秒进程结束：小红小芳开始做饭--18点56分31秒小芳开始做饭--18点56分33秒小芳开始做饭--18点56分35秒进程结束：小芳"""</span></code></pre><h4 id="Pool"><a href="#Pool" class="headerlink" title="Pool"></a>Pool</h4><p> Pool类可以提供指定数量的进程供用户调用，当有新的请求提交到Pool中时，如果池还没有满，就会创建一个新的进程来执行请求。如果池满，请求就会告知先等待，直到池中有进程结束，才会创建新的进程来执行这些请求。<code>Pool</code>默认大小是CPU的核数，我们也可以通过在<code>Pool</code>中传入<code>processes</code>参数即可自定义需要的核数量!也可以直接使用<code>multiprocessing.cpu_count()</code>获取当前CPU的数量，以此数量作为进程数。</p><p><strong>常用方法</strong></p><ul><li><strong>map()</strong>:函数原型：<code>map(func, iterable[, chunksize=None])</code>Pool类中的map方法，与内置的map函数用法行为基本一致，它会使进程阻塞直到结果返回-注意：虽然第二个参数是一个迭代器，但在实际使用中，必须在整个队列都就绪后，程序才会运行子进程</li><li><strong>close()</strong>:关闭进程池（pool），使其不再接受新的任务</li><li><strong>terminal()</strong>:结束工作进程，不再处理未处理的任务</li><li><strong>join()</strong>:主进程阻塞等待子进程的退出， join方法要在close或terminate之后使用</li></ul><h3 id="concurrent-futures"><a href="#concurrent-futures" class="headerlink" title="concurrent.futures"></a>concurrent.futures</h3><p>它提供异步执行回调高层接口，是对线程池和进程池的进一步封装，让开发者可以使用统一的接口非常容易的使用线程池和进程池。</p><p><strong>官方文档：</strong><a href="https://docs.python.org/zh-cn/3/library/concurrent.futures.html" target="_blank" rel="noopener">https://docs.python.org/zh-cn/3/library/concurrent.futures.html</a></p><h4 id="ThreadPoolExecutor"><a href="#ThreadPoolExecutor" class="headerlink" title="ThreadPoolExecutor"></a>ThreadPoolExecutor</h4><p>创建线程池</p><p><code>ThreadPoolExecutor(max_workers=)</code>max_workers 参数来设置线程池中最多能同时运行的线程数目</p><p><code>submit(函数名(传递给函数的参数))</code>函数用来提交线程需要执行的任务到线程池中，并返回该任务的句柄（类似于文件、画图），注意 submit() 不是阻塞的，而是立即返回。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> threading<span class="token keyword">from</span> concurrent<span class="token punctuation">.</span>futures <span class="token keyword">import</span> ThreadPoolExecutor<span class="token keyword">import</span> time<span class="token keyword">class</span> <span class="token class-name">Mythread</span><span class="token punctuation">(</span>threading<span class="token punctuation">.</span>Thread<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">:</span>        threading<span class="token punctuation">.</span>Thread<span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>self<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name        self<span class="token punctuation">.</span>delay <span class="token operator">=</span> delay    <span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        zuofan_time<span class="token punctuation">(</span>self<span class="token punctuation">.</span>name<span class="token punctuation">,</span> self<span class="token punctuation">.</span>delay<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">zuofan_time</span><span class="token punctuation">(</span>threadname<span class="token punctuation">,</span> delay<span class="token punctuation">,</span> counter<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">while</span> counter<span class="token punctuation">:</span>        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span>delay<span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"%s开始做饭--%s"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>threadname<span class="token punctuation">,</span> time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">"%H点%M分%S秒"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        counter <span class="token operator">-=</span> <span class="token number">1</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    pool <span class="token operator">=</span> ThreadPoolExecutor<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        pool<span class="token punctuation">.</span>submit<span class="token punctuation">(</span>zuofan_time<span class="token punctuation">(</span><span class="token string">'某某某'</span> <span class="token operator">+</span> str<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token triple-quoted-string string">"""某某某1开始做饭--17点35分36秒某某某1开始做饭--17点35分37秒某某某1开始做饭--17点35分38秒某某某1开始做饭--17点35分39秒某某某1开始做饭--17点35分40秒某某某2开始做饭--17点35分41秒某某某2开始做饭--17点35分42秒某某某2开始做饭--17点35分43秒某某某2开始做饭--17点35分44秒某某某2开始做饭--17点35分45秒某某某3开始做饭--17点35分46秒某某某3开始做饭--17点35分47秒某某某3开始做饭--17点35分48秒某某某3开始做饭--17点35分49秒某某某3开始做饭--17点35分50秒某某某4开始做饭--17点35分51秒某某某4开始做饭--17点35分52秒某某某4开始做饭--17点35分53秒某某某4开始做饭--17点35分54秒某某某4开始做饭--17点35分55秒 """</span></code></pre><h4 id="ProcessPoolExecutor"><a href="#ProcessPoolExecutor" class="headerlink" title="ProcessPoolExecutor"></a>ProcessPoolExecutor</h4><p>创建进程池(进程数不需要大于内核数)</p><p>用法与上面那个方法相同</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> multiprocessing<span class="token keyword">from</span> concurrent<span class="token punctuation">.</span>futures <span class="token keyword">import</span> ProcessPoolExecutor<span class="token keyword">import</span> time<span class="token keyword">class</span> <span class="token class-name">Myprocess</span><span class="token punctuation">(</span>multiprocessing<span class="token punctuation">.</span>Process<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">:</span>        multiprocessing<span class="token punctuation">.</span>Process<span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>self<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name        self<span class="token punctuation">.</span>delay <span class="token operator">=</span> delay    <span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        zuofan_time<span class="token punctuation">(</span>self<span class="token punctuation">.</span>name<span class="token punctuation">,</span> self<span class="token punctuation">.</span>delay<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">zuofan_time</span><span class="token punctuation">(</span>processname<span class="token punctuation">,</span> delay<span class="token punctuation">,</span> counter<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">while</span> counter<span class="token punctuation">:</span>        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span>delay<span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"%s开始做饭--%s"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>processname<span class="token punctuation">,</span> time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">"%H点%M分%S秒"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        counter <span class="token operator">-=</span> <span class="token number">1</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    pool <span class="token operator">=</span> ProcessPoolExecutor<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        pool<span class="token punctuation">.</span>submit<span class="token punctuation">(</span>zuofan_time<span class="token punctuation">(</span><span class="token string">'某某某'</span> <span class="token operator">+</span> str<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token triple-quoted-string string">"""某某某1开始做饭--19点06分06秒某某某1开始做饭--19点06分07秒某某某1开始做饭--19点06分08秒某某某1开始做饭--19点06分09秒某某某1开始做饭--19点06分10秒某某某2开始做饭--19点06分11秒某某某2开始做饭--19点06分12秒某某某2开始做饭--19点06分13秒某某某2开始做饭--19点06分14秒某某某2开始做饭--19点06分15秒"""</span></code></pre>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Python学习记录</title>
      <link href="/2020/06/14/python-xue-xi-ji-lu/"/>
      <url>/2020/06/14/python-xue-xi-ji-lu/</url>
      
        <content type="html"><![CDATA[<h1 id="零散知识"><a href="#零散知识" class="headerlink" title="零散知识"></a>零散知识</h1><h2 id="try语句"><a href="#try语句" class="headerlink" title="try语句"></a>try语句</h2><p>用来处理异常，运行代码时有时会出现各种各样的错误，致使解析器中断执行，并提示xxxxxxErorr的提示，后面跟具体的错误的描述，这被称为是引发了异常。其实异常告诉我们的是遇到了什么类型的错误。xxxxErorr就是python内置的异常类型。每一种异常类型，都有它自己的错误信息。出现异常程序终止。其它有些异常类型不影响代码的功能，而又不想让异常中断执行时，就要对异常进行处理，而不让他中断程序：</p><p>例如：有一个字典里面存放光头强的信息，想取到它的资料，但具体都有什么资料我们不知道，如果输入的键不存在就会引发异常而中断执行。致使后面的代码也为无法执行。</p><pre class=" language-python"><code class="language-python">information <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'光头强'</span><span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">:</span> <span class="token string">'20'</span><span class="token punctuation">,</span> <span class="token string">'gender'</span><span class="token punctuation">:</span> <span class="token string">'男'</span><span class="token punctuation">}</span><span class="token keyword">print</span><span class="token punctuation">(</span>information<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>information<span class="token punctuation">[</span><span class="token string">'sex'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>information<span class="token punctuation">[</span><span class="token string">'age'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token triple-quoted-string string">"""光头强Traceback (most recent call last):  File "/home/chihiro/Project/PyCharmProject/text.py", line 3, in &lt;module>    print(information['sex'])KeyError: 'sex'"""</span></code></pre><p>那么就要捕获这些异常，绕过它，能让下面的代码继续运行。python提供了try语句来实现这些功能。</p><p>语法：</p><pre class=" language-python"><code class="language-python"><span class="token keyword">try</span><span class="token punctuation">:</span>    可能发生异常的代码<span class="token keyword">except</span> 异常类型：    捕获的异常后要执行的代码</code></pre><p><strong>示例：</strong></p><pre class=" language-python"><code class="language-python">information <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'光头强'</span><span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">:</span> <span class="token string">'20'</span><span class="token punctuation">,</span> <span class="token string">'gender'</span><span class="token punctuation">:</span> <span class="token string">'男'</span><span class="token punctuation">}</span><span class="token keyword">try</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>information<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>information<span class="token punctuation">[</span><span class="token string">'sex'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">except</span> KeyError<span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"sex不存在"</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>information<span class="token punctuation">[</span><span class="token string">'age'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token triple-quoted-string string">"""运行结果光头强sex不存在20"""</span></code></pre><p><strong>捕获所有异常</strong>：</p><p>引发异常的xxxxErorr都是python异常的类型。python中所有异常类型都是基类Exception的基类。那么在写代码的时候不用指定异常的具体类型，只要捕获基类就等于捕获了所有的异常，但输出的是具体的异常信息，这很有利于在大范围内找到具体的错误。也就是你不知道会产生什么样的错误类型，Exception是万能的。</p><p>示例：</p><pre class=" language-python"><code class="language-python">information <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'光头强'</span><span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">:</span> <span class="token string">'20'</span><span class="token punctuation">,</span> <span class="token string">'gender'</span><span class="token punctuation">:</span> <span class="token string">'男'</span><span class="token punctuation">}</span><span class="token keyword">try</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>information<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>information<span class="token punctuation">[</span><span class="token string">'sex'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>type<span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"sex不存在"</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>information<span class="token punctuation">[</span><span class="token string">'age'</span><span class="token punctuation">]</span><span class="token triple-quoted-string string">"""运行结果光头强&lt;class 'KeyError'>sex不存在20"""</span></code></pre><p><strong>异常里的else子句</strong>：</p><p>else子句是可选的，如果使用，必须放在所有的except子句之后。它是在try子句没有发生异常的情况执行。</p><pre class=" language-python"><code class="language-python">information <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'光头强'</span><span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">:</span> <span class="token string">'20'</span><span class="token punctuation">,</span> <span class="token string">'gender'</span><span class="token punctuation">:</span> <span class="token string">'男'</span><span class="token punctuation">}</span><span class="token keyword">try</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>information<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>type<span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">else</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"光头强是伐木工"</span><span class="token punctuation">)</span><span class="token triple-quoted-string string">"""运行结果光头强光头强是伐木工"""</span></code></pre><p><strong>finally子句</strong> </p><p>写在try语句的最后。不管 try 子句里面是否有异常，finally 子句都会执行。</p><pre class=" language-python"><code class="language-python">information <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'光头强'</span><span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">:</span> <span class="token string">'20'</span><span class="token punctuation">,</span> <span class="token string">'gender'</span><span class="token punctuation">:</span> <span class="token string">'男'</span><span class="token punctuation">}</span><span class="token keyword">try</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>information<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>information<span class="token punctuation">[</span><span class="token string">'sex'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>type<span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"sex不存在"</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>information<span class="token punctuation">[</span><span class="token string">'age'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">finally</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"调研结束"</span><span class="token punctuation">)</span><span class="token triple-quoted-string string">"""运行结果光头强&lt;class 'KeyError'>sex不存在20调研结束"""</span></code></pre><h2 id="多线程，多进程，协程"><a href="#多线程，多进程，协程" class="headerlink" title="多线程，多进程，协程"></a>多线程，多进程，协程</h2><h3 id="进程"><a href="#进程" class="headerlink" title="进程"></a>进程</h3><p>进程就是正在运行的程序，比如你的系统现在运行着的QQ就是一个进程，一旦「QQ」运行起来系统就会分配给「QQ」内存和资源。<strong>单进程</strong>就是你的电脑只能做一个事情，比如打开啦QQ就不能再打开微信啦，但是现在可以看到你的电脑又是玩游戏，又是听音乐，这就是<strong>多线程</strong>，在同一段时间里可以’同时’执行多个任务。一个单核的 CPU 在一个时间点上只能运行一个程序。之所以你能感觉到你电脑上的程序在同时运行是因为CPU 在做着切换，因为 CPU 的切换速度超级快，快到让你感觉到你开着的所有程序好像是在同时运行。</p><h3 id="线程"><a href="#线程" class="headerlink" title="线程"></a>线程</h3><p>在一个进程里可以执行多个任务，在这里的每一个任务就是一个线程，线程可以说是程序用CPU的一个基本单元，所以一个程序里如果只是单一的一个执行路径，呢他就是单线程；如果程序中有多个执行路径呢他就是多线程。</p><h3 id="并行"><a href="#并行" class="headerlink" title="并行"></a>并行</h3><p>一个单核的CPU一次只能执行一个进程，多核的CPU就可以同时执行多个进程，这就是并行。在某一个时间段里可以同时执行多个进程。</p><h3 id="并发"><a href="#并发" class="headerlink" title="并发"></a>并发</h3><p>比如在双十一的呢天晚上12：00会有很多人在这个时间点上秒杀某一个商品。在某一时间点上可以同时执行多个进程。</p><h3 id="协程"><a href="#协程" class="headerlink" title="协程"></a>协程</h3><p>协程也叫做微线程，在一个线程里面可以执行多个函数，线程和进程是通过系统调度的，而微线程则不需要，可以根据需要自己调度因为微线程是函数之间在切换所以开销很小。</p><h3 id="互斥锁"><a href="#互斥锁" class="headerlink" title="互斥锁"></a>互斥锁</h3><p>进程和进程之间是相互独立的，而一个进程里的多个线程，这些线程共享一个空间，这个时候线程就要搞事情了，毕竟一块蛋糕被共享了谁都想多分一点，就挤破头的想要抢占多一点资源；这样数据就不安全了所以就有了互斥锁。</p><h2 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h2><p>在Python中实现文件的读写操作其实非常简单，通过Python内置的<code>open</code>函数，我们可以指定文件名、操作模式、编码信息等来获得操作文件的对象，接下来就可以对文件进行读写操作了。这里所说的操作模式是指要打开什么样的文件（字符文件还是二进制文件）以及做什么样的操作（读、写还是追加），具体的如下表所示。</p><table><thead><tr><th>操作模式</th><th>具体含义</th></tr></thead><tbody><tr><td><code>&#39;r&#39;</code></td><td>读取 （默认）</td></tr><tr><td><code>&#39;w&#39;</code></td><td>写入</td></tr><tr><td><code>&#39;x&#39;</code></td><td>写入，如果文件已经存在会产生异常</td></tr><tr><td><code>&#39;a&#39;</code></td><td>追加，将内容写入到已有文件的末尾</td></tr><tr><td><code>&#39;b&#39;</code></td><td>二进制模式</td></tr><tr><td><code>&#39;t&#39;</code></td><td>文本模式（默认）</td></tr><tr><td><code>&#39;+&#39;</code></td><td>更新（既可以读又可以写）</td></tr></tbody></table><p> <strong>open()</strong>方法用于打开一个文件，并返回文件对象，在对文件进行处理过程都需要使用到这个函数，如果该文件无法被打开，会抛出 <code>OSError</code>。<strong>注意：</strong>使用 open() 方法一定要保证关闭文件对象，即调用 close() 方法。文件使用完毕后必须关闭，因为文件对象会占用操作系统的资源，并且操作系统同一时间能打开的文件数量也是有限的。</p><p><code>open(&#39;文件&#39;,&#39;操作方式&#39;,encoding=&#39;字符编码&#39;)</code></p><h3 id="写入文件"><a href="#写入文件" class="headerlink" title="写入文件"></a>写入文件</h3><pre class=" language-python"><code class="language-python">f <span class="token operator">=</span> open<span class="token punctuation">(</span><span class="token string">'he.text'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span>f<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">"hello file"</span><span class="token punctuation">)</span>f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h3 id="读取文件"><a href="#读取文件" class="headerlink" title="读取文件"></a>读取文件</h3><pre class=" language-python"><code class="language-python">f <span class="token operator">=</span> open<span class="token punctuation">(</span><span class="token string">'he.text'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># hello file</span></code></pre><p>调用<strong>read()</strong>会一次性读取文件的全部内容，如果文件有10G，内存就爆了，所以，要保险起见，可以反复调用<strong>read(size)</strong>方法，每次最多读取size个字节的内容。另外，调用<strong>readline()</strong>可以每次读取一行内容，调用<strong>readlines()</strong>一次读取所有内容并按行返回<code>list</code>。因此，要根据需要决定怎么调用。</p><p><strong>read(size)</strong></p><pre class=" language-python"><code class="language-python">f <span class="token operator">=</span> open<span class="token punctuation">(</span><span class="token string">'he.text'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token string">"hello"</span></code></pre><p><strong>readline()</strong></p><p>每次读一行内容</p><pre class=" language-python"><code class="language-python">f <span class="token operator">=</span> open<span class="token punctuation">(</span><span class="token string">'he.text'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span>line <span class="token operator">=</span> f<span class="token punctuation">.</span>readline<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span>f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token triple-quoted-string string">"""hello file"""</span></code></pre><h3 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h3><p>以上的写法是最基本的写法，但是不能直接那样写，在对文件操作的时候，可能无权限，或文件不存在而抛出异常，脚本无法正常运行，所以我们要放进<code>try</code>语句中：</p><pre class=" language-python"><code class="language-python"><span class="token keyword">try</span><span class="token punctuation">:</span>    f <span class="token operator">=</span> open<span class="token punctuation">(</span><span class="token string">'he.text'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span>    f<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">"hello file"</span><span class="token punctuation">)</span><span class="token keyword">except</span> FileNotFoundError<span class="token punctuation">:</span>     <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'无法打开指定的文件!'</span><span class="token punctuation">)</span><span class="token keyword">except</span> LookupError<span class="token punctuation">:</span>     <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'指定了未知的编码!'</span><span class="token punctuation">)</span><span class="token keyword">except</span> UnicodeDecodeError<span class="token punctuation">:</span>     <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'读取文件时解码错误!'</span><span class="token punctuation">)</span><span class="token keyword">finally</span><span class="token punctuation">:</span>     <span class="token keyword">if</span> f<span class="token punctuation">:</span>       f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>但是这样写太麻烦，所以可以使用上下文语法，通过<code>with</code>关键字指定文件对象的上下文环境并在离开上下文环境时自动释放文件资源，代码如下所示。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        <span class="token keyword">with</span> open<span class="token punctuation">(</span><span class="token string">'xxx.txt'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>            <span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>type<span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"操作失败"</span><span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    main<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token triple-quoted-string string">"""&lt;class 'FileNotFoundError'>操作失败"""</span></code></pre><h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><h3 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h3><p>列表是一种结构化的、非标量类型，它是值的有序序列，每个值都可以通过索引进行标识，定义列表可以将列表的元素放在<code>[]</code>中，多个元素用<code>,</code>进行分隔，可以使用<code>for</code>循环对列表元素进行遍历，也可以使用<code>[]</code>或<code>[:]</code>运算符取出列表中的一个或多个元素。</p><p>创建一个列表，只要把逗号分隔的不同的数据项使用方括号括起来即可。遍历列表，列表的下标运算</p><pre class=" language-python"><code class="language-python">lists <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span> <span class="token comment" spellcheck="true">#创建列表</span><span class="token keyword">print</span><span class="token punctuation">(</span>lists<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#打印列表</span><span class="token keyword">print</span><span class="token punctuation">(</span>len<span class="token punctuation">(</span>lists<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#计算列表的长度(元素个数)</span><span class="token keyword">print</span><span class="token punctuation">(</span>lists<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>   <span class="token comment" spellcheck="true">#下标(索引)运算</span><span class="token keyword">print</span><span class="token punctuation">(</span>lists<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">#下标运算</span><span class="token keyword">for</span> i <span class="token keyword">in</span> lists<span class="token punctuation">:</span>   <span class="token comment" spellcheck="true">#for循环遍历列表</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token keyword">for</span> index <span class="token keyword">in</span> range<span class="token punctuation">(</span>len<span class="token punctuation">(</span>lists<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment" spellcheck="true">#通过循环用下标遍历列表元素</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>lists<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token triple-quoted-string string">""" [1, 2, 3, 4, 5, 6]645123456123456 """</span></code></pre><p>向列表中添加元素以及如何从列表中移除元素。</p><pre class=" language-python"><code class="language-python">lists <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span>lists <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token comment" spellcheck="true">#添加元素</span>lists<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>lists<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># [1, 2, 3, 4, 5, 6, 7]</span><span class="token comment" spellcheck="true">#向指定元素位置后添加</span>lists<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span> <span class="token keyword">print</span><span class="token punctuation">(</span>lists<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># [1, 2, 3, 9, 4, 5, 6]</span><span class="token comment" spellcheck="true">#通过成员判断是否在列表里，如果存在就删除</span><span class="token keyword">if</span> <span class="token number">3</span> <span class="token keyword">in</span> lists<span class="token punctuation">:</span>    lists<span class="token punctuation">.</span>remove<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>lists<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># [1, 2, 4, 5, 6]</span><span class="token comment" spellcheck="true">#从指定的位置删除元素</span>lists<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>lists<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># [1, 3, 4, 5, 6]</span><span class="token comment" spellcheck="true">#清空列表元素</span>lists<span class="token punctuation">.</span>clear<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>lists<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#[]</span></code></pre><p>列表的切片操作</p><pre class=" language-python"><code class="language-python">lists <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span>list1 <span class="token operator">=</span> lists<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span>list1<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># [2, 3]</span><span class="token comment" spellcheck="true"># 可以通过完整切片操作来复制列表</span>list2 <span class="token operator">=</span> lists<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span>list2<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># [1, 2, 3, 4, 5, 6]</span>list2 <span class="token operator">=</span> lists<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span>list2<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#[4, 5]</span><span class="token comment" spellcheck="true"># 可以通过反向切片操作来获得倒转后的列表的拷贝</span>list2 <span class="token operator">=</span> lists<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span>list2<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#[6, 5, 4, 3, 2, 1]</span></code></pre><p>对列表的排序操作</p><pre class=" language-python"><code class="language-python">lists <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span>list2 <span class="token operator">=</span> sorted<span class="token punctuation">(</span>lists<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#sorted函数返回列表排序后的拷贝不会修改传入的列表</span><span class="token keyword">print</span><span class="token punctuation">(</span>list2<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#[1, 2, 3, 5, 8, 9]</span>lists <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'狗'</span><span class="token punctuation">,</span> <span class="token string">'狗熊'</span><span class="token punctuation">,</span> <span class="token string">'狗熊岭'</span><span class="token punctuation">]</span>list2 <span class="token operator">=</span> sorted<span class="token punctuation">(</span>lists<span class="token punctuation">,</span> key<span class="token operator">=</span>len<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#通过key关键字参数指定根据字符串长度进行排序而不是默认的字母表顺序</span><span class="token keyword">print</span><span class="token punctuation">(</span>list2<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># ['狗', '狗熊', '狗熊岭']</span></code></pre><h3 id="元组"><a href="#元组" class="headerlink" title="元组"></a>元组</h3><p>Python的元组与列表类似，不同之处在于元组的元素不能修改。元组使用小括号，列表使用方括号。元组创建很简单，只需要在括号中添加元素，并使用逗号隔开即可。</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true">#定义元组</span>t <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'熊大'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token string">'光头强'</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>t<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#光头强</span><span class="token comment" spellcheck="true">#遍历元组中的值</span><span class="token keyword">for</span> x <span class="token keyword">in</span> t<span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token triple-quoted-string string">"""('熊大', 20, '光头强', 30)('熊大', 20, '光头强', 30)('熊大', 20, '光头强', 30)('熊大', 20, '光头强', 30)"""</span><span class="token comment" spellcheck="true">#将元组转换为列表</span>person <span class="token operator">=</span> list<span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># ['熊大', 20, '光头强', 30]</span><span class="token comment" spellcheck="true">#将列表转换为元组</span>person <span class="token operator">=</span> list<span class="token punctuation">(</span>t<span class="token punctuation">)</span>x <span class="token operator">=</span> tuple<span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># ('熊大', 20, '光头强', 30)</span></code></pre><h3 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h3><p>Python中的集合跟数学上的集合是一致的，不允许有重复元素，而且可以进行交集、并集、差集等运算。集合（set）是一个无序的不重复元素序列。可以使用大括号 { } 或者 set() 函数创建集合，注意：创建一个空集合必须用 set() 而不是 { }，因为 { } 是用来创建一个空字典。</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 创建格式：</span>parame <span class="token operator">=</span> <span class="token punctuation">{</span>value01<span class="token punctuation">,</span>value02<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>或者set<span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 创建集合的字面量语法</span>set1 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">}</span><span class="token keyword">print</span><span class="token punctuation">(</span>set1<span class="token punctuation">,</span> <span class="token string">'Length ='</span><span class="token punctuation">,</span> len<span class="token punctuation">(</span>set1<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># {1, 2, 3, 4, 5, 6} Length = 6</span></code></pre><p>向集合添加元素和从集合删除元素。</p><pre class=" language-python"><code class="language-python">set1 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">}</span>set1<span class="token punctuation">.</span>add<span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>set1<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># {1, 2, 3, 4, 5, 6, 9}</span><span class="token keyword">if</span> <span class="token number">3</span> <span class="token keyword">in</span> set1<span class="token punctuation">:</span>    set1<span class="token punctuation">.</span>remove<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>set1<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># {1, 2, 4, 5, 6}</span>set1<span class="token punctuation">.</span>discard<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># 移除集合中的元素，且如果元素不存在，不会发生错误</span><span class="token keyword">print</span><span class="token punctuation">(</span>set1<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># {1, 2, 4, 5, 6}</span></code></pre><p>集合的成员、交集、并集、差集等运算</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true">#交集</span>set1 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">}</span>set2 <span class="token operator">=</span> set<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>set1 <span class="token operator">&amp;</span> set2<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#{1, 2, 3, 5, 6}</span><span class="token comment" spellcheck="true">#并集</span><span class="token keyword">print</span><span class="token punctuation">(</span>set1 <span class="token operator">|</span> set2<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#{1, 2, 3, 4, 5, 6}</span><span class="token comment" spellcheck="true">#差集</span><span class="token keyword">print</span><span class="token punctuation">(</span>set1 <span class="token operator">-</span> set2<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#{4}</span><span class="token comment" spellcheck="true">#对称差</span><span class="token keyword">print</span><span class="token punctuation">(</span>set1 <span class="token operator">^</span> set2<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#{4}</span><span class="token comment" spellcheck="true"># 判断子集和超集</span><span class="token keyword">print</span><span class="token punctuation">(</span>set1 <span class="token operator">&lt;=</span> set2<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#False</span></code></pre><h3 id="字典"><a href="#字典" class="headerlink" title="字典"></a>字典</h3><p>字典是另一种可变容器模型，Python中的字典跟我们生活中使用的字典是一样一样的，它可以存储任意类型对象，与列表、集合不同的是，字典的每个元素都是由一个键和一个值组成的“键值对”，键和值通过冒号分开。</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 创建字典的字面量语法</span>scores <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'光头强'</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token string">'熊大'</span><span class="token punctuation">:</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token string">'熊二'</span><span class="token punctuation">:</span> <span class="token number">15</span><span class="token punctuation">}</span><span class="token keyword">print</span><span class="token punctuation">(</span>scores<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#{'光头强': 20, '熊大': 16, '熊二': 15}</span><span class="token comment" spellcheck="true"># 创建字典的构造器语法</span>scores <span class="token operator">=</span> dict<span class="token punctuation">(</span>光头强<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span> 熊大<span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">,</span> 熊二<span class="token operator">=</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>scores<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># {'光头强': 20, '熊大': 16, '熊二': 15}</span><span class="token comment" spellcheck="true"># 通过zip函数将两个序列压成字典</span>items2 <span class="token operator">=</span> dict<span class="token punctuation">(</span>zip<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'123'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>items2<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 通过键可以获取字典中对应的值</span><span class="token keyword">print</span><span class="token punctuation">(</span>scores<span class="token punctuation">[</span><span class="token string">'光头强'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># 20</span><span class="token comment" spellcheck="true"># 对字典中所有键值对进行遍历</span><span class="token keyword">for</span> key <span class="token keyword">in</span> scores<span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">'{key}: {scores[key]}'</span><span class="token punctuation">)</span><span class="token triple-quoted-string string">"""光头强: 20熊大: 16熊二: 15"""</span><span class="token comment" spellcheck="true"># 更新字典中的元素</span>scores<span class="token punctuation">[</span><span class="token string">'光头强'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">35</span><span class="token keyword">print</span><span class="token punctuation">(</span>scores<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># {'光头强': 35, '熊大': 16, '熊二': 15}</span>scores<span class="token punctuation">.</span>update<span class="token punctuation">(</span>熊大<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">,</span> 熊二<span class="token operator">=</span><span class="token number">26</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>scores<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># {'光头强': 20, '熊大': 30, '熊二': 26}</span><span class="token comment" spellcheck="true"># 删除字典中的元素</span>scores<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token string">'光头强'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>scores<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># {'熊大': 16, '熊二': 15}</span><span class="token comment" spellcheck="true"># 清空字典</span>scores<span class="token punctuation">.</span>clear<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>scores<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># {}</span></code></pre><h2 id="yield"><a href="#yield" class="headerlink" title="yield"></a>yield</h2><h1 id="常用函数"><a href="#常用函数" class="headerlink" title="常用函数"></a>常用函数</h1><h2 id="range"><a href="#range" class="headerlink" title="range()"></a>range()</h2><p>可创建一个整数列表</p><p>函数语法</p><pre class=" language-python"><code class="language-python">range<span class="token punctuation">(</span>start<span class="token punctuation">,</span> stop step<span class="token punctuation">)</span></code></pre><p>参数说明：</p><ul><li>start: 计数从 start 开始。默认是从 0 开始。例如range（5）等价于range（0， 5）;</li><li>stop: 计数到 stop 结束，但不包括 stop。例如：range（0， 5） 是[0, 1, 2, 3, 4]没有5</li><li>step：步长，默认为1。例如：range（0， 5） 等价于 range(0, 5, 1)</li></ul><p><strong>示例</strong></p><pre class=" language-python"><code class="language-python"><span class="token keyword">for</span> x <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 1 2 3 4 5 6 7 8 9</span></code></pre><h1 id="常用模块"><a href="#常用模块" class="headerlink" title="常用模块"></a>常用模块</h1><h2 id="time"><a href="#time" class="headerlink" title="time"></a>time</h2><p>时间处理的模块</p><h3 id="time-1"><a href="#time-1" class="headerlink" title="time()"></a>time()</h3><pre class=" language-python"><code class="language-python"><span class="token triple-quoted-string string">"""返回当前时间戳 运行结果 1591867153.6124237"""</span><span class="token keyword">import</span> time<span class="token keyword">print</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><h3 id="sleep"><a href="#sleep" class="headerlink" title="sleep()"></a>sleep()</h3><p>线程推迟指定的时间运行。单位为秒。</p><pre class=" language-python"><code class="language-python"><span class="token string">"每过两秒打印一个数字"</span><span class="token keyword">import</span> timea <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span></code></pre><h3 id="localtime"><a href="#localtime" class="headerlink" title="localtime()"></a>localtime()</h3><p>以时间元祖(struct_time)的形式返回</p><pre class=" language-python"><code class="language-python">time<span class="token punctuation">.</span>struct_time<span class="token punctuation">(</span>tm_year<span class="token operator">=</span><span class="token number">2020</span><span class="token punctuation">,</span> tm_mon<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">,</span> tm_mday<span class="token operator">=</span><span class="token number">11</span><span class="token punctuation">,</span> tm_hour<span class="token operator">=</span><span class="token number">17</span><span class="token punctuation">,</span> tm_min<span class="token operator">=</span><span class="token number">26</span><span class="token punctuation">,</span> tm_sec<span class="token operator">=</span><span class="token number">11</span><span class="token punctuation">,</span> tm_wday<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> tm_yday<span class="token operator">=</span><span class="token number">163</span><span class="token punctuation">,</span> tm_isdst<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span></code></pre><h3 id="strftime"><a href="#strftime" class="headerlink" title="strftime()"></a>strftime()</h3><p>根据时间元组的形式格化为字符形式</p><pre class=" language-python"><code class="language-python">    <span class="token operator">%</span>A      本地完整星期名称    <span class="token operator">%</span>b      本地简化月份名称    <span class="token operator">%</span>B      本地完整月份名称    <span class="token operator">%</span>c      本地相应的日期和时间表示    <span class="token operator">%</span>d      一个月中的第几天<span class="token punctuation">(</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">31</span><span class="token punctuation">)</span>    <span class="token operator">%</span>H      一天中的第几个小时<span class="token punctuation">(</span><span class="token number">24</span>小时制，<span class="token number">00</span><span class="token operator">-</span><span class="token number">23</span><span class="token punctuation">)</span>    <span class="token operator">%</span>l      一天中的第几个小时<span class="token punctuation">(</span><span class="token number">12</span>小时制，<span class="token number">01</span><span class="token operator">-</span><span class="token number">12</span><span class="token punctuation">)</span>    <span class="token operator">%</span>j      一年中的第几天<span class="token punctuation">(</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">366</span><span class="token punctuation">)</span>    <span class="token operator">%</span>m      月份<span class="token punctuation">(</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">12</span><span class="token punctuation">)</span>    <span class="token operator">%</span>M      分钟数<span class="token punctuation">(</span><span class="token number">00</span><span class="token operator">-</span><span class="token number">59</span><span class="token punctuation">)</span>    <span class="token operator">%</span>p      本地am或者pm的相应符    <span class="token operator">%</span>S      秒<span class="token punctuation">(</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">61</span><span class="token punctuation">)</span>    <span class="token operator">%</span>U      一年中的星期数<span class="token punctuation">(</span><span class="token number">00</span><span class="token operator">-</span><span class="token number">53</span><span class="token punctuation">,</span>星期天是一个星期的开始<span class="token punctuation">,</span>第一个星期天之前的所有天数都放在第０周<span class="token punctuation">)</span>    <span class="token operator">%</span>w      一个星期中的第几天<span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">0</span>是星期天<span class="token punctuation">)</span>    <span class="token operator">%</span>W      和<span class="token operator">%</span>U基本相同，不同的是<span class="token operator">%</span>W以星期一为一个星期的开始    <span class="token operator">%</span>x      本地相应日期    <span class="token operator">%</span>X      本地相应时间    <span class="token operator">%</span>y      去掉世纪的年份<span class="token punctuation">(</span><span class="token number">00</span><span class="token operator">-</span><span class="token number">99</span><span class="token punctuation">)</span>    <span class="token operator">%</span>Y      完整的年份        </code></pre><p>例如：</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> time<span class="token keyword">print</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">"%Y-%m-%d %H:%M:%S"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token string">"2020-06-11 17:37:22"</span></code></pre><h2 id="Pandas"><a href="#Pandas" class="headerlink" title="Pandas"></a>Pandas</h2><p>Pandas是Python的核心数据分析支持库，提供了快速、灵活、明确的数据结构，旨在简单、直观地处理关系型、标记型数据。</p><h3 id="Series"><a href="#Series" class="headerlink" title="Series"></a>Series</h3><p>Series的字符串表现形式为：索引在左边，值在右边。由于我们没有为数据指定索引。于是会自动创建一个0到N-1（N为长度）的整数型索引。可以把它当作一个表的列。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> pandasx <span class="token operator">=</span> pandas<span class="token punctuation">.</span>Series<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token string">'word'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token triple-quoted-string string">"""0        11        22        33    hello4     worddtype: object"""</span></code></pre><h3 id="DataFrame"><a href="#DataFrame" class="headerlink" title="DataFrame"></a>DataFrame</h3><p>DataFrame是一个表格型的数据结构，它包含有一组有序的列，每列可以是不同的值类型（数值，字符串，布尔值等）。DataFrame既有行索引也有列索引， 它可以被看做由<code>Series</code>组成的大字典，也就是一个表格。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> pandasx <span class="token operator">=</span> <span class="token punctuation">{</span>    <span class="token string">'姓名'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'光头强'</span><span class="token punctuation">,</span> <span class="token string">'熊大'</span><span class="token punctuation">,</span> <span class="token string">'熊二'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token string">'年龄'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token string">'性别'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'男'</span><span class="token punctuation">,</span> <span class="token string">'男'</span><span class="token punctuation">,</span> <span class="token string">'男'</span><span class="token punctuation">]</span><span class="token punctuation">}</span>y <span class="token operator">=</span> pandas<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token triple-quoted-string string">"""    姓名  年龄 性别0  光头强  30  男1   熊大  19  男2   熊二  18  男"""</span></code></pre><p>DataFrame的行索引是index，列索引是columns，我们可以在创建DataFrame时指定索引的值：</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> pandasx <span class="token operator">=</span> <span class="token punctuation">{</span>    <span class="token string">'姓名'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'光头强'</span><span class="token punctuation">,</span> <span class="token string">'熊大'</span><span class="token punctuation">,</span> <span class="token string">'熊二'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token string">'年龄'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token string">'性别'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'男'</span><span class="token punctuation">,</span> <span class="token string">'男'</span><span class="token punctuation">,</span> <span class="token string">'男'</span><span class="token punctuation">]</span><span class="token punctuation">}</span>y <span class="token operator">=</span> pandas<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>x<span class="token punctuation">,</span> index<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'one'</span><span class="token punctuation">,</span> <span class="token string">'two'</span><span class="token punctuation">,</span> <span class="token string">'three'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> columns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'姓名'</span><span class="token punctuation">,</span> <span class="token string">'年龄'</span><span class="token punctuation">,</span> <span class="token string">'性别'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token triple-quoted-string string">"""/usr/bin/python3.8 /home/chihiro/Project/PyCharmProject/demo.py        姓名  年龄 性别one    光头强  30  男two     熊大  19  男three   熊二  18  男"""</span></code></pre><h3 id="CSV文件操作"><a href="#CSV文件操作" class="headerlink" title="CSV文件操作"></a>CSV文件操作</h3><p>读取csv文件内容</p><p><code>pandas.read_csv()</code></p><p><strong>常用参数</strong></p><ul><li>header    header默认为0，表示第一行是表头，如果header设置为None表示没有表头</li><li>index：是否输出索引，默认True</li><li>sep：设置分隔符，默认”,”</li></ul><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> pandasz <span class="token operator">=</span> pandas<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'he.csv'</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>z<span class="token punctuation">)</span><span class="token triple-quoted-string string">"""    姓名  年龄 性别0  光头强  30  男1   熊大  19  男2   熊二  18  男"""</span></code></pre><p>写入csv文件</p><p><code>to_csv</code></p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> pandasx <span class="token operator">=</span> <span class="token punctuation">{</span>    <span class="token string">'姓名'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'光头强'</span><span class="token punctuation">,</span> <span class="token string">'熊大'</span><span class="token punctuation">,</span> <span class="token string">'熊二'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token string">'年龄'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token string">'性别'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'男'</span><span class="token punctuation">,</span> <span class="token string">'男'</span><span class="token punctuation">,</span> <span class="token string">'男'</span><span class="token punctuation">]</span><span class="token punctuation">}</span>y <span class="token operator">=</span> pandas<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>x<span class="token punctuation">,</span> index<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'one'</span><span class="token punctuation">,</span> <span class="token string">'two'</span><span class="token punctuation">,</span> <span class="token string">'three'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> columns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'姓名'</span><span class="token punctuation">,</span> <span class="token string">'年龄'</span><span class="token punctuation">,</span> <span class="token string">'性别'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>y<span class="token punctuation">.</span>to_csv<span class="token punctuation">(</span><span class="token string">'he.csv'</span><span class="token punctuation">,</span> sep<span class="token operator">=</span><span class="token string">':'</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#sep用来指定数据分隔符号，默认为逗号</span><span class="token triple-quoted-string string">"""这是文件内容：:姓名:年龄:性别one:光头强:30:男two:熊大:19:男three:熊二:18:男"""</span></code></pre><hr><h2 id="CSV"><a href="#CSV" class="headerlink" title="CSV"></a>CSV</h2><p>csv文件格式是一种通用的电子表格和数据库导入导出格式。可以使用csv模块对csv文件进行操作。</p><h3 id="读文件"><a href="#读文件" class="headerlink" title="读文件"></a>读文件</h3><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> csv<span class="token keyword">with</span> open<span class="token punctuation">(</span><span class="token string">'he.csv'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>    csv_reader <span class="token operator">=</span> csv<span class="token punctuation">.</span>reader<span class="token punctuation">(</span>f<span class="token punctuation">)</span>    <span class="token keyword">for</span> x <span class="token keyword">in</span> csv_reader<span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token triple-quoted-string string">"""['名字', '年龄']['熊大', '18']['熊二', '17']"""</span></code></pre><h3 id="写文件"><a href="#写文件" class="headerlink" title="写文件"></a>写文件</h3><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> csv<span class="token keyword">with</span> open<span class="token punctuation">(</span><span class="token string">'he.csv'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>    csv_writer <span class="token operator">=</span> csv<span class="token punctuation">.</span>writer<span class="token punctuation">(</span>f<span class="token punctuation">)</span>    header <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'名字'</span><span class="token punctuation">,</span> <span class="token string">'年龄'</span><span class="token punctuation">]</span>    rows <span class="token operator">=</span> <span class="token punctuation">[</span>        <span class="token punctuation">[</span><span class="token string">'熊大'</span><span class="token punctuation">,</span> <span class="token string">'18'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token punctuation">[</span><span class="token string">'熊二'</span><span class="token punctuation">,</span> <span class="token string">'17'</span><span class="token punctuation">]</span>    <span class="token punctuation">]</span>    csv_writer<span class="token punctuation">.</span>writerow<span class="token punctuation">(</span>header<span class="token punctuation">)</span>    csv_writer<span class="token punctuation">.</span>writerows<span class="token punctuation">(</span>rows<span class="token punctuation">)</span><span class="token triple-quoted-string string">"""文件内容:名字,年龄熊大,18熊二,17"""</span></code></pre><h2 id="pymysql"><a href="#pymysql" class="headerlink" title="pymysql"></a>pymysql</h2><p>对数据库进行操作</p><h2 id="matplotlib"><a href="#matplotlib" class="headerlink" title="matplotlib"></a>matplotlib</h2><h2 id="requests"><a href="#requests" class="headerlink" title="requests"></a>requests</h2><p>在Python中发起标准的HTTP请求</p><h3 id="发送请求"><a href="#发送请求" class="headerlink" title="发送请求"></a>发送请求</h3><p><strong>GET请求</strong></p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> requestsrequests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"https://www.sqlsec.com"</span><span class="token punctuation">)</span></code></pre><p><strong>POST请求</strong></p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> requestsdata <span class="token operator">=</span> <span class="token punctuation">{</span>    <span class="token string">"username"</span><span class="token punctuation">:</span> <span class="token string">"admin"</span><span class="token punctuation">,</span>    <span class="token string">"password"</span><span class="token punctuation">:</span> <span class="token string">"password"</span><span class="token punctuation">,</span>    <span class="token string">"Login"</span><span class="token punctuation">:</span> <span class="token string">"Login"</span><span class="token punctuation">,</span>    <span class="token string">"user_token"</span><span class="token punctuation">:</span> <span class="token string">"3370d41cf95f4e9b08360f5fe9316325"</span><span class="token punctuation">}</span>requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span><span class="token string">"http://192.168.31.54:222/login.php"</span><span class="token punctuation">,</span> data<span class="token operator">=</span>data<span class="token punctuation">)</span></code></pre><p><strong>其他HTTP请求</strong></p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> requestsrequests<span class="token punctuation">.</span>put<span class="token punctuation">(</span><span class="token string">'https://httpbin.org/put'</span><span class="token punctuation">,</span> data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'key'</span><span class="token punctuation">:</span><span class="token string">'value'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>requests<span class="token punctuation">.</span>delete<span class="token punctuation">(</span><span class="token string">'https://httpbin.org/delete'</span><span class="token punctuation">)</span>requests<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token string">'https://httpbin.org/get'</span><span class="token punctuation">)</span>requests<span class="token punctuation">.</span>options<span class="token punctuation">(</span><span class="token string">'https://httpbin.org/get'</span><span class="token punctuation">)</span></code></pre><h3 id="参数传递"><a href="#参数传递" class="headerlink" title="参数传递"></a>参数传递</h3><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> requests<span class="token string">"直接将参数拼接在URL后面"</span>requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"http://192.168.31.54:222/Less-1?id=1"</span><span class="token punctuation">)</span><span class="token string">"使用关键字params,等同于http://192.168.31.54:222/Less-1?id=1"</span>requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"http://192.168.31.54:222/Less-1"</span><span class="token punctuation">,</span> params <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"id"</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token string">"使用data,以表单的形式传递参数（参数不会拼接到 URL 后面）"</span>requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span><span class="token string">"http://192.168.31.54:222/Less-1"</span><span class="token punctuation">,</span> data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"id"</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token string">"添加headers"</span>headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"User-Agent"</span><span class="token punctuation">:</span><span class="token string">"Mozilla/5.0"</span><span class="token punctuation">}</span>requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"http://192.168.31.54:222"</span><span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span></code></pre><h3 id="获取响应内容"><a href="#获取响应内容" class="headerlink" title="获取响应内容"></a>获取响应内容</h3><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> requestsre <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"https://www.sqlsec.com"</span><span class="token punctuation">)</span><span class="token string">"获取服务器响应文本内容"</span><span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token string">"获取服务器文本响应内容编码格式"</span><span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>encoding<span class="token punctuation">)</span><span class="token string">"获取字节响应内容"</span><span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>content<span class="token punctuation">)</span><span class="token string">"获取响应码"</span><span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>status_code<span class="token punctuation">)</span><span class="token string">"获取响应头"</span><span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>readers<span class="token punctuation">)</span></code></pre><h2 id="re"><a href="#re" class="headerlink" title="re"></a>re</h2><p>在 Python 中，我们可以使用内置的 re 模块来使用正则表达式。</p><h3 id="常用的正则匹配速查表"><a href="#常用的正则匹配速查表" class="headerlink" title="常用的正则匹配速查表"></a>常用的正则匹配速查表</h3><table><thead><tr><th align="center">字符</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center">\d</td><td align="center">代表任意数字，就是阿拉伯数字 0-9 这些玩意。</td></tr><tr><td align="center"><code>\D</code></td><td align="center">大写的就是和小写的唱反调，\d 你代表的是任意数字是吧？那么我 \D 就代表不是数字的。</td></tr><tr><td align="center"><code>\w</code></td><td align="center">代表字母，数字，下划线。也就是 a-z、A-Z、0-9、_。</td></tr><tr><td align="center"><code>\W</code></td><td align="center">跟 \w 唱反调，代表不是字母，不是数字，不是下划线的。</td></tr><tr><td align="center">\n</td><td align="center">代表一个换行。</td></tr><tr><td align="center"><code>\r</code></td><td align="center">代表一个回车。</td></tr><tr><td align="center"><code>\f</code></td><td align="center">代表换页。</td></tr><tr><td align="center"><code>\t</code></td><td align="center">代表一个 Tab 。</td></tr><tr><td align="center"><code>\s</code></td><td align="center">代表所有的空白字符，也就是上面这个：\n、\r、\t、\f。</td></tr><tr><td align="center"><code>\S</code></td><td align="center">跟 \s 唱反调，代表所有不是空白的字符。</td></tr><tr><td align="center"><code>\A</code></td><td align="center">代表字符串的开始。</td></tr><tr><td align="center"><code>\Z</code></td><td align="center">代表字符串的结束。</td></tr><tr><td align="center">^</td><td align="center">匹配字符串开始的位置。</td></tr><tr><td align="center">$</td><td align="center">匹配字符创结束的位置。</td></tr><tr><td align="center">.</td><td align="center">代表所有的单个字符，除了 \n \r</td></tr><tr><td align="center"><code>[...]</code></td><td align="center">代表在 [] 范围内的字符，比如 [a-z] 就代表 a到z的字母</td></tr><tr><td align="center"><code>[^...]</code></td><td align="center">跟 […] 唱反调，代表不在 [] 范围内的字符</td></tr><tr><td align="center">{n}</td><td align="center">匹配在 {n} 前面的东西，比如: o{2} 不能匹配 Bob 中的 o ，但是能匹配 food 中的两个o。</td></tr><tr><td align="center"><code>{n,m}</code></td><td align="center">匹配在 {n,m} 前面的东西，比如：o{1,3} 将匹配“fooooood”中的前三个o。</td></tr><tr><td align="center"><code>{n，}</code></td><td align="center">匹配在 {n,} 前面的东西，比如：o{2,} 不能匹配“Bob”中的“o”，但能匹配“foooood”中的所有o。</td></tr><tr><td align="center"><code>*</code></td><td align="center">和 {0,} 一个样，匹配 * 前面的 0 次或多次。 比如 zo* 能匹配“z”、“zo”以及“zoo”。</td></tr><tr><td align="center"><code>+</code></td><td align="center">和{1，} 一个样，匹配 + 前面 1 次或多次。 比如 zo+”能匹配“zo”以及“zoo”，但不能匹配“z”。</td></tr><tr><td align="center"><code>？</code></td><td align="center">和{0,1} 一个样，匹配 ？前面 0 次或 1 次。</td></tr><tr><td align="center">a|b</td><td align="center">匹配 a 或者 b。</td></tr><tr><td align="center"><code>（）</code></td><td align="center">匹配括号里面的内容。</td></tr></tbody></table><h3 id="re-match"><a href="#re-match" class="headerlink" title="re.match"></a>re.match</h3><p>语法：</p><p><code>re.match(&#39;匹配规则&#39;,&#39;需要过滤的内容&#39;)</code></p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> recontent <span class="token operator">=</span> <span class="token string">"hello 123 python"</span>re <span class="token operator">=</span> re<span class="token punctuation">.</span>match<span class="token punctuation">(</span>r<span class="token string">"^he.*\s(\d+)\s(.*?n$)"</span><span class="token punctuation">,</span> content<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token triple-quoted-string string">"""&lt;re.Match object; span=(0, 16), match='hello 123 python'>hello 123 python123python"""</span></code></pre><p><strong>注：</strong><code>re.group(N)</code> 返回第N组括号匹配的字符，而<code>re.group() == re.group(0) == 所有匹配的字符</code>，<code>re.groups()</code>返回所有括号匹配的字符。</p><p><code>.*？</code>是我们在匹配过程中最常使用到的表示的就是匹配任意字符，但是<code>.*？</code>的 <code>.</code>代表所有的单个字符除了 <code>\n</code> 如果我们的字符串有换行了怎么办呢？这时候使用re.S,使 . 匹配包括换行在内的所有字符</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> recontent <span class="token operator">=</span> <span class="token triple-quoted-string string">"""hello 123 py thon"""</span>re <span class="token operator">=</span> re<span class="token punctuation">.</span>match<span class="token punctuation">(</span>r<span class="token string">"^he.*\s(\d+)\s(.*?n$)"</span><span class="token punctuation">,</span> content<span class="token punctuation">,</span> re<span class="token punctuation">.</span>S<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token triple-quoted-string string">"""hello 123 py thon123py thon"""</span><span class="token comment" spellcheck="true">#附带一个不使re.S执行的结果</span><span class="token triple-quoted-string string">"""Traceback (most recent call last):  File "/home/chihiro/Project/PyCharmProject/text.py", line 5, in &lt;module>    print(re.group())AttributeError: 'NoneType' object has no attribute 'group'"""</span></code></pre><h3 id="re-search"><a href="#re-search" class="headerlink" title="re.search"></a>re.search</h3><p>直接去扫描字符串，然后把匹配成功的地一个结果返回给你。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> recontent <span class="token operator">=</span> <span class="token string">"hello 123 py thon"</span>re <span class="token operator">=</span> re<span class="token punctuation">.</span>search<span class="token punctuation">(</span>r<span class="token string">"^he.*\s(\d+)\s(.*?n$)"</span><span class="token punctuation">,</span> content<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 123</span></code></pre><h3 id="re-findall"><a href="#re-findall" class="headerlink" title="re.findall"></a>re.findall</h3><p>通过它我们就能轻松的获取所有匹配的内容了</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> recontent <span class="token operator">=</span> <span class="token triple-quoted-string string">"""hello 123 python;hello 456 python;hello 789 python;"""</span>res <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span>r<span class="token string">'he.*?(\d+)\s.*?n;'</span><span class="token punctuation">,</span> content<span class="token punctuation">,</span> re<span class="token punctuation">.</span>S<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># ['123', '456', '789']</span></code></pre><h3 id="re-sub"><a href="#re-sub" class="headerlink" title="re.sub"></a>re.sub</h3><p>把匹配到的内容替换为其他内容：<code>re.sub(&#39;匹配规则&#39;,&#39;替换为&#39;,&#39;待查找的内容&#39;)</code></p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> recontent <span class="token operator">=</span> <span class="token triple-quoted-string string">"""hello 123 python;hello 456 python;hello 789 python;"""</span>res <span class="token operator">=</span> re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span>r<span class="token string">'he.*?(\d+)\s.*?n;'</span><span class="token punctuation">,</span> <span class="token string">'999'</span><span class="token punctuation">,</span> content<span class="token punctuation">,</span> re<span class="token punctuation">.</span>S<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token triple-quoted-string string">"""999999999"""</span></code></pre><h3 id="re-compile"><a href="#re-compile" class="headerlink" title="re.compile"></a>re.compile</h3><p>这个主要就是把我们的匹配符封装一下</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> recontent <span class="token operator">=</span> <span class="token string">"hello 123 python"</span>pattern <span class="token operator">=</span> re<span class="token punctuation">.</span>compile<span class="token punctuation">(</span>r<span class="token string">"^he.*\s(\d+)\s.*on$"</span><span class="token punctuation">,</span> re<span class="token punctuation">.</span>S<span class="token punctuation">)</span>re <span class="token operator">=</span> re<span class="token punctuation">.</span>match<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> content<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 123</span></code></pre><h2 id="BeautifulSoup"><a href="#BeautifulSoup" class="headerlink" title="BeautifulSoup"></a>BeautifulSoup</h2><p>可以从HTML或XML文件中提取数据</p><p>随便一段代码，获取当中想要获取的东西</p><pre class=" language-html"><code class="language-html">html = """<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>你好Beautifulsoup<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>狗熊岭<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>www.taobao.com<span class="token punctuation">"</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>淘宝<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>狗熊<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>www.jindong.com<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>强哥<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>demo3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span>"""</code></pre><p>首先导入模块然后把HTML源码传给BeautifulSoup使用<code>lxml</code>进行解析，然后可以直接获取想要的内容</p><pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoupsoup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>html<span class="token punctuation">,</span> <span class="token string">'lxml'</span><span class="token punctuation">)</span></code></pre><p>获取title标签下的内容</p><pre class=" language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>soup<span class="token punctuation">.</span>title<span class="token punctuation">.</span>string<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 你好Beautifulsoup</span></code></pre><p>获取p标签下的内容</p><pre class=" language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>soup<span class="token punctuation">.</span>p<span class="token punctuation">.</span>string<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 狗熊岭</span></code></pre><p>获取p标签下的所有内容(只查找第一个)</p><pre class=" language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># &lt;p class="text1">狗熊岭&lt;/p></span></code></pre><p>获取父级标签如title</p><pre class=" language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>soup<span class="token punctuation">.</span>title<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># head</span></code></pre><p>获取超链接</p><pre class=" language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>soup<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># &lt;a href="www.taobao.com" title="淘宝">狗熊&lt;/a></span></code></pre><p>获取所有超链接</p><pre class=" language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># [&lt;a href="www.taobao.com" title="淘宝">狗熊&lt;/a>, &lt;a href="www.jindong.com">强哥&lt;/a>]</span></code></pre><p>获取class为text2的p标签下的a标签下的内容</p><pre class=" language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span>class_<span class="token operator">=</span><span class="token string">'text2'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>string<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 狗熊</span></code></pre><p>获取a标签下的title属性值</p><pre class=" language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span>class_<span class="token operator">=</span><span class="token string">'text2'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 淘宝</span></code></pre><p>这里只是列举一些最基本的获取方法，也是最常用的，具体如何使用请看「<a href="https://beautifulsoup.readthedocs.io/zh_CN/v4.4.0/" target="_blank" rel="noopener">BeautifulSoup</a>」，还需要不断的实战练习。</p><h2 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h2><p>Python3 中可以使用 json 模块来对 JSON 数据进行编解码</p><h3 id="loads"><a href="#loads" class="headerlink" title="loads()"></a>loads()</h3><p>将json数据转化为python对象是这样的</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> jsonjsondata <span class="token operator">=</span> <span class="token triple-quoted-string string">'''{"Uin":0,"UserName":"@c482d142bc698bc3971d9f8c26335c5c","NickName":"8","DisplayName":"","ChatRoomId":0,"KeyWord":"che","EncryChatRoomId":"","IsOwner":0}'''</span>friend <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>jsondata<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>friend<span class="token punctuation">)</span><span class="token triple-quoted-string string">"""运行结果{'Uin': 0, 'UserName': '@c482d142bc698bc3971d9f8c26335c5c', 'NickName': '8', 'DisplayName': '', 'ChatRoomId': 0, 'KeyWord': 'che', 'EncryChatRoomId': '', 'IsOwner': 0}"""</span></code></pre><h3 id="dumps"><a href="#dumps" class="headerlink" title="dumps()"></a>dumps()</h3><p>将python对象转换为json</p><pre class=" language-python"><code class="language-python"><span class="token string">"将上面输出的结果转换为json"</span><span class="token keyword">import</span> jsondata <span class="token operator">=</span> <span class="token punctuation">{</span>    <span class="token string">'Uin'</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>    <span class="token string">'UserName'</span><span class="token punctuation">:</span> <span class="token string">'@c482d142bc698bc3971d9f8c26335c5c'</span><span class="token punctuation">,</span>    <span class="token string">'NickName'</span><span class="token punctuation">:</span> <span class="token string">'8'</span><span class="token punctuation">,</span>    <span class="token string">'DisplayName'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>    <span class="token string">'ChatRoomId'</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>    <span class="token string">'KeyWord'</span><span class="token punctuation">:</span> <span class="token string">'che'</span><span class="token punctuation">,</span>    <span class="token string">'EncryChatRoomId'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>    <span class="token string">'IsOwner'</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">}</span>json <span class="token operator">=</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token triple-quoted-string string">"""运行结果{"Uin": 0, "UserName": "@c482d142bc698bc3971d9f8c26335c5c", "NickName": "8", "DisplayName": "", "ChatRoomId": 0, "KeyWord": "che", "EncryChatRoomId": "", "IsOwner": 0}"""</span></code></pre><h2 id="threading"><a href="#threading" class="headerlink" title="threading"></a>threading</h2><p>多线程操作模块</p><h3 id="Thread"><a href="#Thread" class="headerlink" title="Thread"></a>Thread</h3><p>Thread 类提供了如下的 <code>__init__()</code> 构造器，可以用来创建线程：<code>__init__(self, group=None, target=None, name=None, args=(), kwargs=None, *,daemon=None)</code></p><table><thead><tr><th>参数名</th><th>含义</th></tr></thead><tbody><tr><td>target</td><td>线程调用的对象，就是目标函数</td></tr><tr><td>name</td><td>为线程起一个名字(线程的名字)如果没有赋值，默认为“Thread-N” 的形式</td></tr><tr><td>args</td><td>为目标函数传递实参，元组</td></tr><tr><td>kwargs</td><td>为目标函数传递关键字参数，字典</td></tr></tbody></table><p><strong>常用方法</strong></p><ul><li><strong>run():</strong> 用以表示线程活动的方法。</li><li><strong>start()</strong>:启动线程活动。</li><li><strong>join([time]):</strong> 等待至线程中止。这阻塞调用线程直至线程的join() 方法被调用中止-正常退出或者抛出未处理的异常-或者是可选的超时发生。</li><li><strong>isAlive():</strong> 返回线程是否活动的。</li><li><strong>getName():</strong> 返回线程名。</li><li><strong>setName():</strong> 设置线程名。</li></ul><p>直接创建 Thread ，将一个 callable 对象从类的构造器传递进去，这个 callable 就是回调函数，用来处理任务。比如以下例子，雇佣俩工人，在同一时间做不同的事情</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> threading<span class="token keyword">import</span> time<span class="token keyword">def</span> <span class="token function">zuofan_time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"小红在%s做饭"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">"%H点%M分%S秒"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">xiyi_time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"小芳正在%s洗衣服"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">"%H点%M分%S秒"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    mythread1 <span class="token operator">=</span> threading<span class="token punctuation">.</span>Thread<span class="token punctuation">(</span>target<span class="token operator">=</span>zuofan_time<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># 创建线程</span>    mythread2 <span class="token operator">=</span> threading<span class="token punctuation">.</span>Thread<span class="token punctuation">(</span>target<span class="token operator">=</span>xiyi_time<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># 创建线程</span>    mythread1<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#启动线程</span>    mythread2<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#启动线程</span><span class="token triple-quoted-string string">"""小红在13点08分07秒做饭小芳正在13点08分07秒洗衣服小红在13点08分08秒做饭小芳正在13点08分08秒洗衣服小红在13点08分09秒做饭小芳正在13点08分09秒洗衣服小芳正在13点08分10秒洗衣服小红在13点08分10秒做饭"""</span></code></pre><p>通过继承 Thread 类，我们可以自定义一个线程类，从而实例化该类对象，获得子线程。需要注意的是，在创建 Thread 类的子类时，必须重写从父类继承得到的 run() 方法。因为该方法即为要创建的子线程执行的方法，其功能如同第一种创建方法中的 action() 自定义函数。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> threading<span class="token keyword">import</span> time<span class="token keyword">class</span> <span class="token class-name">Mythread</span><span class="token punctuation">(</span>threading<span class="token punctuation">.</span>Thread<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment" spellcheck="true"># 继承threading.Thread</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">:</span>        threading<span class="token punctuation">.</span>Thread<span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># 保留原来threading.Thread中的初始化函数</span>        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name        self<span class="token punctuation">.</span>delay <span class="token operator">=</span> delay    <span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment" spellcheck="true"># 重写run方法</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"线程开始："</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>name<span class="token punctuation">)</span>        zuofan_time<span class="token punctuation">(</span>self<span class="token punctuation">.</span>name<span class="token punctuation">,</span> self<span class="token punctuation">.</span>delay<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"线程结束："</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">zuofan_time</span><span class="token punctuation">(</span>threadname<span class="token punctuation">,</span> delay<span class="token punctuation">,</span> counter<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">while</span> counter<span class="token punctuation">:</span>        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span>delay<span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"%s开始做饭--%s"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>threadname<span class="token punctuation">,</span> time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">"%H点%M分%S秒"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        counter <span class="token operator">-=</span> <span class="token number">1</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    td1 <span class="token operator">=</span> Mythread<span class="token punctuation">(</span><span class="token string">"小红"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#小红歇息一秒然后继续做饭</span>    td2 <span class="token operator">=</span> Mythread<span class="token punctuation">(</span><span class="token string">"小芳"</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#小芳歇息两秒然后继续做饭</span>    td1<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>    td2<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token triple-quoted-string string">"""线程开始：小红线程开始：小芳小红开始做饭--16点46分02秒小芳开始做饭--16点46分03秒小红开始做饭--16点46分03秒小红开始做饭--16点46分04秒小红开始做饭--16点46分05秒小芳开始做饭--16点46分05秒小红开始做饭--16点46分06秒线程结束：小红小芳开始做饭--16点46分07秒小芳开始做饭--16点46分09秒小芳开始做饭--16点46分11秒线程结束：小芳"""</span></code></pre><h2 id="concurrent-futures"><a href="#concurrent-futures" class="headerlink" title="concurrent.futures"></a>concurrent.futures</h2><p>它提供异步执行回调高层接口，是对线程池和进程池的进一步封装，让开发者可以使用统一的接口非常容易的使用线程池和进程池。</p><p>还是以上面的为例子，当吃饭的人多了，两个保姆也不够用啦，怎么办？疯狂的开启线程？当然这是不可行的</p><pre class=" language-python"><code class="language-python">td1 <span class="token operator">=</span> Mythread<span class="token punctuation">(</span><span class="token string">"小红"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>td2 <span class="token operator">=</span> Mythread<span class="token punctuation">(</span><span class="token string">"小芳"</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>td3 <span class="token operator">=</span> Mythread<span class="token punctuation">(</span><span class="token string">"小狗"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>td4 <span class="token operator">=</span> Mythread<span class="token punctuation">(</span><span class="token string">"大黄"</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>td5 <span class="token operator">=</span> Mythread<span class="token punctuation">(</span><span class="token string">"阿狗"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>td6 <span class="token operator">=</span> Mythread<span class="token punctuation">(</span><span class="token string">"张三"</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span></code></pre><p>因为频繁的创建线程 销毁线程，非常的浪费资源；所以因该把他们放在一起，也就是线程池，通过线程池就可以重复利用线程，不会造成过多的浪费。在 python 中可以使用 <code>ThreadPoolExecutor</code> 来实现线程池。如下</p><h3 id="ThreadPoolExecutor"><a href="#ThreadPoolExecutor" class="headerlink" title="ThreadPoolExecutor"></a>ThreadPoolExecutor</h3><p>创建线程池</p><p><code>ThreadPoolExecutor(max_workers=)</code>max_workers 参数来设置线程池中最多能同时运行的线程数目</p><p><code>submit(函数名(传递给函数的参数))</code>函数用来提交线程需要执行的任务到线程池中，并返回该任务的句柄（类似于文件、画图），注意 submit() 不是阻塞的，而是立即返回。</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> threading<span class="token keyword">from</span> concurrent<span class="token punctuation">.</span>futures <span class="token keyword">import</span> ThreadPoolExecutor<span class="token keyword">import</span> time<span class="token keyword">class</span> <span class="token class-name">Mythread</span><span class="token punctuation">(</span>threading<span class="token punctuation">.</span>Thread<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">:</span>        threading<span class="token punctuation">.</span>Thread<span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>self<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name        self<span class="token punctuation">.</span>delay <span class="token operator">=</span> delay    <span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        zuofan_time<span class="token punctuation">(</span>self<span class="token punctuation">.</span>name<span class="token punctuation">,</span> self<span class="token punctuation">.</span>delay<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">zuofan_time</span><span class="token punctuation">(</span>threadname<span class="token punctuation">,</span> delay<span class="token punctuation">,</span> counter<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">while</span> counter<span class="token punctuation">:</span>        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span>delay<span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"%s开始做饭--%s"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>threadname<span class="token punctuation">,</span> time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">"%H点%M分%S秒"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        counter <span class="token operator">-=</span> <span class="token number">1</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    pool <span class="token operator">=</span> ThreadPoolExecutor<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        pool<span class="token punctuation">.</span>submit<span class="token punctuation">(</span>zuofan_time<span class="token punctuation">(</span><span class="token string">'某某某'</span> <span class="token operator">+</span> str<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token triple-quoted-string string">"""某某某1开始做饭--17点35分36秒某某某1开始做饭--17点35分37秒某某某1开始做饭--17点35分38秒某某某1开始做饭--17点35分39秒某某某1开始做饭--17点35分40秒某某某2开始做饭--17点35分41秒某某某2开始做饭--17点35分42秒某某某2开始做饭--17点35分43秒某某某2开始做饭--17点35分44秒某某某2开始做饭--17点35分45秒某某某3开始做饭--17点35分46秒某某某3开始做饭--17点35分47秒某某某3开始做饭--17点35分48秒某某某3开始做饭--17点35分49秒某某某3开始做饭--17点35分50秒某某某4开始做饭--17点35分51秒某某某4开始做饭--17点35分52秒某某某4开始做饭--17点35分53秒某某某4开始做饭--17点35分54秒某某某4开始做饭--17点35分55秒 """</span></code></pre><h3 id="ProcessPoolExecutor"><a href="#ProcessPoolExecutor" class="headerlink" title="ProcessPoolExecutor"></a>ProcessPoolExecutor</h3><p>创建进程池(进程数不需要大于内核数)</p><p>用法与上面那个方法相同</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> multiprocessing<span class="token keyword">from</span> concurrent<span class="token punctuation">.</span>futures <span class="token keyword">import</span> ProcessPoolExecutor<span class="token keyword">import</span> time<span class="token keyword">class</span> <span class="token class-name">Myprocess</span><span class="token punctuation">(</span>multiprocessing<span class="token punctuation">.</span>Process<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">:</span>        multiprocessing<span class="token punctuation">.</span>Process<span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>self<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name        self<span class="token punctuation">.</span>delay <span class="token operator">=</span> delay    <span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        zuofan_time<span class="token punctuation">(</span>self<span class="token punctuation">.</span>name<span class="token punctuation">,</span> self<span class="token punctuation">.</span>delay<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">zuofan_time</span><span class="token punctuation">(</span>processname<span class="token punctuation">,</span> delay<span class="token punctuation">,</span> counter<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">while</span> counter<span class="token punctuation">:</span>        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span>delay<span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"%s开始做饭--%s"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>processname<span class="token punctuation">,</span> time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">"%H点%M分%S秒"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        counter <span class="token operator">-=</span> <span class="token number">1</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    pool <span class="token operator">=</span> ProcessPoolExecutor<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        pool<span class="token punctuation">.</span>submit<span class="token punctuation">(</span>zuofan_time<span class="token punctuation">(</span><span class="token string">'某某某'</span> <span class="token operator">+</span> str<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token triple-quoted-string string">"""某某某1开始做饭--19点06分06秒某某某1开始做饭--19点06分07秒某某某1开始做饭--19点06分08秒某某某1开始做饭--19点06分09秒某某某1开始做饭--19点06分10秒某某某2开始做饭--19点06分11秒某某某2开始做饭--19点06分12秒某某某2开始做饭--19点06分13秒某某某2开始做饭--19点06分14秒某某某2开始做饭--19点06分15秒"""</span></code></pre><h2 id="multiprocessing"><a href="#multiprocessing" class="headerlink" title="multiprocessing"></a>multiprocessing</h2><p>多进程操作模块，对多核CPU的利用率比Thread要好。</p><h3 id="Process"><a href="#Process" class="headerlink" title="Process"></a>Process</h3><p>Process 对象与 Thread 对象的用法相同。直接看例子吧，直接进行创建！</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> multiprocessing<span class="token keyword">import</span> time<span class="token keyword">def</span> <span class="token function">zuofan_time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"小红在%s做饭"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">"%H点%M分%S秒"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">xiyi_time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"小芳正在%s洗衣服"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">"%H点%M分%S秒"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    mythread1 <span class="token operator">=</span> multiprocessing<span class="token punctuation">.</span>Process<span class="token punctuation">(</span>target<span class="token operator">=</span>zuofan_time<span class="token punctuation">)</span>    mythread2 <span class="token operator">=</span> multiprocessing<span class="token punctuation">.</span>Process<span class="token punctuation">(</span>target<span class="token operator">=</span>xiyi_time<span class="token punctuation">)</span>    mythread1<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>    mythread2<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token triple-quoted-string string">"""小红在18点48分19秒做饭小芳正在18点48分19秒洗衣服小红在18点48分20秒做饭小芳正在18点48分21秒洗衣服小红在18点48分22秒做饭小芳正在18点48分22秒洗衣服小红在18点48分23秒做饭小芳正在18点48分23秒洗衣服 """</span></code></pre><p>创建子类，继承父类（Process），重写Run方法</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> multiprocessing<span class="token keyword">import</span> time<span class="token keyword">class</span> <span class="token class-name">Myprocess</span><span class="token punctuation">(</span>multiprocessing<span class="token punctuation">.</span>Process<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">:</span>        multiprocessing<span class="token punctuation">.</span>Process<span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>self<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name        self<span class="token punctuation">.</span>delay <span class="token operator">=</span> delay    <span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment" spellcheck="true"># 重写run方法</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"进程开始："</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>name<span class="token punctuation">)</span>        zuofan_time<span class="token punctuation">(</span>self<span class="token punctuation">.</span>name<span class="token punctuation">,</span> self<span class="token punctuation">.</span>delay<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"进程结束："</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">zuofan_time</span><span class="token punctuation">(</span>processname<span class="token punctuation">,</span> delay<span class="token punctuation">,</span> counter<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">while</span> counter<span class="token punctuation">:</span>        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span>delay<span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"%s开始做饭--%s"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>processname<span class="token punctuation">,</span> time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">"%H点%M分%S秒"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        counter <span class="token operator">-=</span> <span class="token number">1</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    td1 <span class="token operator">=</span> Myprocess<span class="token punctuation">(</span><span class="token string">"小红"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#小红歇息一秒然后继续做饭</span>    td2 <span class="token operator">=</span> Myprocess<span class="token punctuation">(</span><span class="token string">"小芳"</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#小芳歇息两秒然后继续做饭</span>    td1<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>    td2<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token triple-quoted-string string">"""进程开始：小红进程开始：小芳小红开始做饭--18点56分26秒小红开始做饭--18点56分27秒小芳开始做饭--18点56分27秒小红开始做饭--18点56分28秒小红开始做饭--18点56分29秒小芳开始做饭--18点56分29秒小红开始做饭--18点56分30秒进程结束：小红小芳开始做饭--18点56分31秒小芳开始做饭--18点56分33秒小芳开始做饭--18点56分35秒进程结束：小芳"""</span></code></pre><h3 id="Pool"><a href="#Pool" class="headerlink" title="Pool"></a>Pool</h3><p> Pool类可以提供指定数量的进程供用户调用，当有新的请求提交到Pool中时，如果池还没有满，就会创建一个新的进程来执行请求。如果池满，请求就会告知先等待，直到池中有进程结束，才会创建新的进程来执行这些请求。<code>Pool</code>默认大小是CPU的核数，我们也可以通过在<code>Pool</code>中传入<code>processes</code>参数即可自定义需要的核数量!也可以直接使用<code>multiprocessing.cpu_count()</code>获取当前CPU的数量，以此数量作为进程数。</p><p><strong>常用方法</strong></p><ul><li><strong>map()</strong>:函数原型：<code>map(func, iterable[, chunksize=None])</code>Pool类中的map方法，与内置的map函数用法行为基本一致，它会使进程阻塞直到结果返回-注意：虽然第二个参数是一个迭代器，但在实际使用中，必须在整个队列都就绪后，程序才会运行子进程</li><li><strong>close()</strong>:关闭进程池（pool），使其不再接受新的任务</li><li><strong>terminal()</strong>:结束工作进程，不再处理未处理的任务</li><li><strong>join()</strong>:主进程阻塞等待子进程的退出， join方法要在close或terminate之后使用</li></ul><p>以豆瓣网Top图书为例子：</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> requests<span class="token keyword">import</span> time<span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup<span class="token keyword">import</span> multiprocessing<span class="token keyword">def</span> <span class="token function">get_response</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">:</span>    headers <span class="token operator">=</span> <span class="token punctuation">{</span>        <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> 'Mozilla<span class="token operator">/</span><span class="token number">5.0</span> <span class="token punctuation">(</span>X11<span class="token punctuation">;</span> Linux x86_64<span class="token punctuation">)</span> AppleWebKit<span class="token operator">/</span> \        <span class="token number">537.36</span> <span class="token punctuation">(</span>KHTML<span class="token punctuation">,</span> like Gecko<span class="token punctuation">)</span> Chrome<span class="token operator">/</span><span class="token number">83.0</span><span class="token punctuation">.</span><span class="token number">4103.61</span> Safari<span class="token operator">/</span><span class="token number">537.36</span>'    <span class="token punctuation">}</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>        <span class="token keyword">if</span> response<span class="token punctuation">.</span>status_code <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">:</span>            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"开始获取豆瓣图书"</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> response<span class="token punctuation">.</span>text    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"获取失败"</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">parse_result</span><span class="token punctuation">(</span>soup<span class="token punctuation">)</span><span class="token punctuation">:</span>    lists <span class="token operator">=</span> soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span>class_<span class="token operator">=</span><span class="token string">"indent"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">'table'</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> result <span class="token keyword">in</span> lists<span class="token punctuation">:</span>        book_name <span class="token operator">=</span> result<span class="token punctuation">.</span>find<span class="token punctuation">(</span>class_<span class="token operator">=</span><span class="token string">"pl2"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">)</span>        <span class="token keyword">try</span><span class="token punctuation">:</span>            book_description <span class="token operator">=</span> result<span class="token punctuation">.</span>find<span class="token punctuation">(</span>class_<span class="token operator">=</span><span class="token string">"inq"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>string        <span class="token keyword">except</span> Exception <span class="token keyword">as</span> f<span class="token punctuation">:</span>            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"没有描述"</span><span class="token punctuation">)</span>        book_score <span class="token operator">=</span> result<span class="token punctuation">.</span>find<span class="token punctuation">(</span>class_<span class="token operator">=</span><span class="token string">"rating_nums"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>string        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'书名：'</span> <span class="token operator">+</span> book_name <span class="token operator">+</span> <span class="token string">'   '</span> <span class="token operator">+</span> <span class="token string">"评分:"</span> <span class="token operator">+</span> book_score <span class="token operator">+</span> <span class="token string">"   "</span> <span class="token operator">+</span> <span class="token string">'描述:'</span> <span class="token operator">+</span> book_description<span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">:</span>    html <span class="token operator">=</span> get_response<span class="token punctuation">(</span>url<span class="token punctuation">)</span>    soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>html<span class="token punctuation">,</span> <span class="token string">'lxml'</span><span class="token punctuation">)</span>    books <span class="token operator">=</span> parse_result<span class="token punctuation">(</span>soup<span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    start <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>    urls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        url <span class="token operator">=</span> <span class="token string">"https://book.douban.com/top250?start="</span> <span class="token operator">+</span> str<span class="token punctuation">(</span>i<span class="token operator">*</span><span class="token number">25</span><span class="token punctuation">)</span>        urls<span class="token punctuation">.</span>append<span class="token punctuation">(</span>url<span class="token punctuation">)</span>    pool <span class="token operator">=</span> multiprocessing<span class="token punctuation">.</span>Pool<span class="token punctuation">(</span>processes<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">)</span>    pool<span class="token punctuation">.</span>map<span class="token punctuation">(</span>main<span class="token punctuation">,</span> urls<span class="token punctuation">)</span>    pool<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>    pool<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">)</span>    end <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>end<span class="token operator">-</span>start<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 以上代码设置啦进程执行完成时间为 0.5031812191009521</span><span class="token comment" spellcheck="true"># 同样的代码没有设置进程执行完成的时间为 2.2932705879211426 </span></code></pre><hr><h1 id="爬虫实例"><a href="#爬虫实例" class="headerlink" title="爬虫实例"></a>爬虫实例</h1><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a href="https://github.com/wistbean/learn_python3_spider" target="_blank" rel="noopener">https://github.com/wistbean/learn_python3_spider</a></p><p><a href="https://github.com/jackfrued/Python-100-Days" target="_blank" rel="noopener">https://github.com/jackfrued/Python-100-Days</a></p>]]></content>
      
      
      <categories>
          
          <category> Others </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 编程 </tag>
            
            <tag> 爬虫 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux常用命令</title>
      <link href="/2020/06/06/linux-chang-yong-ming-ling/"/>
      <url>/2020/06/06/linux-chang-yong-ming-ling/</url>
      
        <content type="html"><![CDATA[<h2 id="curl"><a href="#curl" class="headerlink" title="curl"></a>curl</h2>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 命令 </tag>
            
            <tag> 系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PHP常见函数记录</title>
      <link href="/2020/06/03/php-chang-jian-han-shu-ji-lu/"/>
      <url>/2020/06/03/php-chang-jian-han-shu-ji-lu/</url>
      
        <content type="html"><![CDATA[<h2 id="isset"><a href="#isset" class="headerlink" title="isset()"></a>isset()</h2><p>判断变量是否设置且不为NULL，变量存在且不为NULL返回true，变量存在值为NULL返回false，变量不存在返回false。如果已经使用 unset() 释放了一个变量之后，它将不再是 isset()。</p><pre class=" language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span><span class="token variable">$a</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token variable">$b</span> <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">;</span><span class="token variable">$c</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span><span class="token function">unset</span><span class="token punctuation">(</span><span class="token variable">$c</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token function">isset</span><span class="token punctuation">(</span><span class="token variable">$a</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token function">isset</span><span class="token punctuation">(</span><span class="token variable">$b</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token function">isset</span><span class="token punctuation">(</span><span class="token variable">$c</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token function">isset</span><span class="token punctuation">(</span><span class="token variable">$d</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token delimiter">?></span><span class="token comment" spellcheck="true">//运行结果</span><span class="token function">bool</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token function">bool</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token function">bool</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token function">bool</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span></code></pre><h2 id="empty"><a href="#empty" class="headerlink" title="empty()"></a>empty()</h2><p>判断变量是否为空，变量不存在返回true，当变量存在并且值非空非0返回false，否则返回true; empty() 本质上与 !isset($var) || $var == false 等价!</p><p>以下的东西被认为是空的返回ture：</p><ul><li>“” (空字符串)</li><li>0 (作为整数的0)</li><li>0.0 (作为浮点数的0)</li><li>“0” (作为字符串的0)</li><li>NULL</li><li>FALSE</li><li>array() (一个空数组)</li><li>$var; (一个声明了，但是没有值的变量)</li></ul><pre class=" language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span><span class="token variable">$a</span> <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span><span class="token variable">$b</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token variable">$c</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token variable">$d</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token variable">$e</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token variable">$a</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token variable">$b</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token variable">$c</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token variable">$d</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token variable">$e</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token delimiter">?></span><span class="token comment" spellcheck="true">//运行结果</span><span class="token function">bool</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token function">bool</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token function">bool</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token function">bool</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token function">bool</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span></code></pre><h2 id="get-magic-quotes-gpc"><a href="#get-magic-quotes-gpc" class="headerlink" title="get_magic_quotes_gpc()"></a>get_magic_quotes_gpc()</h2><p>获取php的环境变量magic_quotes_gpc的值，如果值为1时表示开启，为0时表示关闭。开启时php会自动为POST，GET，COOKIE传过来的参数值自动增加转义字符<code>\</code>在 PHP 5.4.0 起将始终返回 <strong><code>FALSE</code></strong>。</p><h2 id="stripslashes"><a href="#stripslashes" class="headerlink" title="stripslashes()"></a>stripslashes()</h2><p>删除转义字符<code>\</code></p><pre class=" language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span><span class="token keyword">echo</span> <span class="token function">stripslashes</span><span class="token punctuation">(</span><span class="token string">"hello \word"</span><span class="token punctuation">)</span><span class="token delimiter">?></span><span class="token comment" spellcheck="true">//运行结果</span>hello word</code></pre><h2 id="addslashes"><a href="#addslashes" class="headerlink" title="addslashes()"></a>addslashes()</h2><p>addslashes() 函数返回在预定义字符之前添加反斜杠的字符串。预定义字符是：</p><ul><li>单引号（’）</li><li>双引号（”）</li><li>反斜杠（\）</li><li>NULL</li></ul><pre class=" language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span><span class="token variable">$str</span> <span class="token operator">=</span> <span class="token string">"hello w'ord"</span><span class="token punctuation">;</span><span class="token keyword">echo</span> <span class="token variable">$str</span><span class="token punctuation">;</span><span class="token keyword">echo</span> <span class="token string">"\n"</span><span class="token punctuation">;</span><span class="token keyword">echo</span> <span class="token function">addslashes</span><span class="token punctuation">(</span><span class="token variable">$str</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token delimiter">?></span><span class="token comment" spellcheck="true">//运行结果</span>hello w'ordhello w\'ord</code></pre><h2 id="ctype-digit"><a href="#ctype-digit" class="headerlink" title="ctype_digit()"></a>ctype_digit()</h2><p>检测字符串中是否都为数字，为数字返回true，不为数字时返回false，负数和小数不会通过，参数一定是字符串，如果不是字符串返回false。</p><pre class=" language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span><span class="token variable">$a</span> <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span><span class="token variable">$b</span> <span class="token operator">=</span> <span class="token string">"123"</span><span class="token punctuation">;</span><span class="token variable">$c</span> <span class="token operator">=</span> <span class="token string">"abc"</span><span class="token punctuation">;</span><span class="token variable">$d</span> <span class="token operator">=</span> <span class="token string">"a1b2c3"</span><span class="token punctuation">;</span><span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token function">ctype_digit</span><span class="token punctuation">(</span><span class="token variable">$a</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token function">ctype_digit</span><span class="token punctuation">(</span><span class="token variable">$b</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token function">ctype_digit</span><span class="token punctuation">(</span><span class="token variable">$c</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token function">ctype_digit</span><span class="token punctuation">(</span><span class="token variable">$d</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token delimiter">?></span><span class="token comment" spellcheck="true">//运行结果</span><span class="token function">bool</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token function">bool</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token function">bool</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token function">bool</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span></code></pre><h2 id="mysql-real-escape-string"><a href="#mysql-real-escape-string" class="headerlink" title="mysql_real_escape_string()"></a>mysql_real_escape_string()</h2><p>mysql_real_escape_string() 函数转义 SQL 语句中使用的字符串中的特殊字符。</p><p>下列字符受影响：</p><ul><li>\x00</li><li>\n</li><li>\r</li><li>\</li><li>‘</li><li>“</li><li>\x1a </li></ul><p>如果成功，则该函数返回被转义的字符串。如果失败，则返回 false。</p><p>可使用本函数来预防数据库攻击</p><pre class=" language-php"><code class="language-php"></code></pre><h2 id="intval"><a href="#intval" class="headerlink" title="intval()"></a>intval()</h2><p>用于获取变量的整数值</p><pre class=" language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span><span class="token variable">$a</span> <span class="token operator">=</span> <span class="token number">6.6</span><span class="token punctuation">;</span><span class="token variable">$b</span> <span class="token operator">=</span> <span class="token number">6.2</span><span class="token punctuation">;</span><span class="token variable">$c</span> <span class="token operator">=</span> <span class="token string">'6.5'</span><span class="token punctuation">;</span><span class="token keyword">echo</span> <span class="token function">intval</span><span class="token punctuation">(</span><span class="token variable">$a</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">echo</span> <span class="token function">intval</span><span class="token punctuation">(</span><span class="token variable">$b</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">echo</span> <span class="token function">intval</span><span class="token punctuation">(</span><span class="token variable">$c</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token delimiter">?></span><span class="token comment" spellcheck="true">//运行结果</span><span class="token number">666</span></code></pre><h2 id="preg-replace"><a href="#preg-replace" class="headerlink" title="preg_replace()"></a>preg_replace()</h2><p>用于执行一个正则表达式的搜索匹配和替换</p><pre class=" language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span><span class="token variable">$str</span> <span class="token operator">=</span> <span class="token string">"hello123andANDword"</span><span class="token punctuation">;</span><span class="token keyword">echo</span> <span class="token function">preg_replace</span><span class="token punctuation">(</span><span class="token string">'/\d/'</span><span class="token punctuation">,</span><span class="token string">" "</span><span class="token punctuation">,</span><span class="token variable">$str</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//替换123为空格</span><span class="token keyword">echo</span> <span class="token string">"\n"</span><span class="token punctuation">;</span><span class="token keyword">echo</span> <span class="token function">preg_replace</span><span class="token punctuation">(</span><span class="token string">'/and/i'</span><span class="token punctuation">,</span><span class="token string">"or"</span><span class="token punctuation">,</span><span class="token variable">$str</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//替换and为or ‘i’忽略大小写</span><span class="token delimiter">?></span><span class="token comment" spellcheck="true">//运行结果</span>hello   andANDwordhello123ororword</code></pre><h2 id="str-replace"><a href="#str-replace" class="headerlink" title="str_replace()"></a>str_replace()</h2><p>替换字符串</p><pre class=" language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span>    <span class="token keyword">echo</span> <span class="token function">str_replace</span><span class="token punctuation">(</span><span class="token string">'word'</span><span class="token punctuation">,</span><span class="token string">'world'</span><span class="token punctuation">,</span><span class="token string">'hello word'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token delimiter">?></span><span class="token comment" spellcheck="true">//运行结果</span>hello world</code></pre><h2 id="trim"><a href="#trim" class="headerlink" title="trim()"></a>trim()</h2><p>移除字符串两侧的空白字符或其他预定义字符</p><pre class=" language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span>    <span class="token variable">$str</span> <span class="token operator">=</span> <span class="token string">'hello word'</span><span class="token punctuation">;</span>    <span class="token keyword">echo</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$str</span><span class="token punctuation">,</span><span class="token string">'hd'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token delimiter">?></span><span class="token comment" spellcheck="true">//运行结果</span>ello wor</code></pre><h2 id="strip-tags"><a href="#strip-tags" class="headerlink" title="strip_tags()"></a>strip_tags()</h2><p>函数剥去字符串中的 HTML、XML 以及 PHP 的标签。</p><pre class=" language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span><span class="token keyword">echo</span> <span class="token function">strip_tags</span><span class="token punctuation">(</span><span class="token string">"Hello &lt;b>world!&lt;/b>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token delimiter">?></span><span class="token comment" spellcheck="true">//运行结果</span>Hello world<span class="token operator">!</span></code></pre><h2 id="htmlspecialchars"><a href="#htmlspecialchars" class="headerlink" title="htmlspecialchars()"></a>htmlspecialchars()</h2><p>把预定义字符转换为HTML实体</p><p>预定义的字符是：</p><ul><li>&amp; （和号）成为 &amp;amp;</li><li>“ （双引号）成为 &amp;quot;</li><li>‘ （单引号）成为 ‘</li><li>&lt; （小于）成为 &amp;lt;</li><li>&gt; （大于）成为 &amp;gt;</li></ul><pre class=" language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span><span class="token variable">$str</span> <span class="token operator">=</span> <span class="token string">"This is some &lt;b>chihiro&lt;/b> text."</span><span class="token punctuation">;</span><span class="token keyword">echo</span> <span class="token function">htmlspecialchars</span><span class="token punctuation">(</span><span class="token variable">$str</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token delimiter">?></span><span class="token comment" spellcheck="true">//运行结果</span>This is some <span class="token operator">&amp;</span>lt<span class="token punctuation">;</span>b<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span>chihiro<span class="token operator">&amp;</span>lt<span class="token punctuation">;</span><span class="token operator">/</span>b<span class="token operator">&amp;</span>gt<span class="token punctuation">;</span> text<span class="token punctuation">.</span></code></pre><h2 id="fnmatch"><a href="#fnmatch" class="headerlink" title="fnmatch()"></a>fnmatch()</h2><p>检查字符串或文件名是否与给定的通配符模式匹配。</p><pre class=" language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span><span class="token variable">$txt</span> <span class="token operator">=</span> <span class="token string">"hello word"</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">fnmatch</span><span class="token punctuation">(</span><span class="token string">"hello *"</span><span class="token punctuation">,</span><span class="token variable">$txt</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">echo</span> <span class="token string">"Welcome"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token delimiter">?></span><span class="token comment" spellcheck="true">//运行结果</span>Welcome</code></pre><h2 id="die"><a href="#die" class="headerlink" title="die()"></a>die()</h2><p>该函数输出一条消息，并退出当前脚本。</p><h2 id="PHP超全局变量"><a href="#PHP超全局变量" class="headerlink" title="PHP超全局变量"></a>PHP超全局变量</h2><h3 id="GLOBALS"><a href="#GLOBALS" class="headerlink" title="$GLOBALS"></a>$GLOBALS</h3><p>$GLOBALS 这种全局变量用于在 PHP 脚本中的任意位置访问全局变量（从函数或方法中均可）。PHP 在名为 $GLOBALS[index] 的数组中存储了所有全局变量。变量的名字就是数组的键。</p><pre class=" language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span><span class="token variable">$x</span> <span class="token operator">=</span> <span class="token number">75</span><span class="token punctuation">;</span><span class="token variable">$y</span> <span class="token operator">=</span> <span class="token number">25</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">Test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token variable">$GLOBALS</span><span class="token punctuation">[</span><span class="token string">'z'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$GLOBALS</span><span class="token punctuation">[</span><span class="token string">'x'</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token variable">$GLOBALS</span><span class="token punctuation">[</span><span class="token string">'y'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">Test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">echo</span> <span class="token variable">$z</span><span class="token punctuation">;</span><span class="token delimiter">?></span><span class="token comment" spellcheck="true">//运行结果</span><span class="token number">100</span></code></pre><h3 id="SERVER"><a href="#SERVER" class="headerlink" title="$_SERVER"></a>$_SERVER</h3><p>$_SERVER这种超全局变量保存关于报头、路径和脚本位置的信息。下表列出了您能够在 $_SERVER 中访问的最重要的元素：</p><table><thead><tr><th>元素</th><th>描述</th></tr></thead><tbody><tr><td>$_SERVER[‘PHP_SELF’]</td><td>返回当前执行脚本的文件名。</td></tr><tr><td>$_SERVER[‘GATEWAY_INTERFACE’]</td><td>返回服务器使用的 CGI 规范的版本。</td></tr><tr><td>$_SERVER[‘SERVER_ADDR’]</td><td>返回当前运行脚本所在的服务器的 IP 地址。</td></tr><tr><td>$_SERVER[‘SERVER_NAME’]</td><td>返回当前运行脚本所在的服务器的主机名</td></tr><tr><td>$_SERVER[‘SERVER_SOFTWARE’]</td><td>返回服务器标识字符串（比如 Apache/2.2.24）。</td></tr><tr><td>$_SERVER[‘SERVER_PROTOCOL’]</td><td>返回请求页面时通信协议的名称和版本（例如，“HTTP/1.0”）。</td></tr><tr><td>$_SERVER[‘REQUEST_METHOD’]</td><td>返回访问页面使用的请求方法（例如 POST）。</td></tr><tr><td>$_SERVER[‘REQUEST_TIME’]</td><td>返回请求开始时的时间戳（例如 1577687494）。</td></tr><tr><td>$_SERVER[‘QUERY_STRING’]</td><td>返回查询字符串，如果是通过查询字符串访问此页面。</td></tr><tr><td>$_SERVER[‘HTTP_ACCEPT’]</td><td>返回来自当前请求的请求头。</td></tr><tr><td>$_SERVER[‘HTTP_ACCEPT_CHARSET’]</td><td>返回来自当前请求的 Accept_Charset 头（ 例如 utf-8,ISO-8859-1）</td></tr><tr><td>$_SERVER[‘HTTP_HOST’]</td><td>返回来自当前请求的 Host 头。</td></tr><tr><td>$_SERVER[‘HTTP_REFERER’]</td><td>返回当前页面的完整 URL（不可靠，因为不是所有用户代理都支持）。</td></tr><tr><td>$_SERVER[‘HTTPS’]</td><td>是否通过安全 HTTP 协议查询脚本。</td></tr><tr><td>$_SERVER[‘REMOTE_ADDR’]</td><td>返回浏览当前页面的用户的 IP 地址。</td></tr><tr><td>$_SERVER[‘REMOTE_HOST’]</td><td>返回浏览当前页面的用户的主机名。</td></tr><tr><td>$_SERVER[‘REMOTE_PORT’]</td><td>返回用户机器上连接到 Web 服务器所使用的端口号。</td></tr><tr><td>$_SERVER[‘SCRIPT_FILENAME’]</td><td>返回当前执行脚本的绝对路径。</td></tr><tr><td>$_SERVER[‘SERVER_ADMIN’]</td><td>该值指明了 Apache 服务器配置文件中的 SERVER_ADMIN 参数。</td></tr><tr><td>$_SERVER[‘SERVER_PORT’]</td><td>Web 服务器使用的端口。默认值为 “80”。</td></tr><tr><td>$_SERVER[‘SERVER_SIGNATURE’]</td><td>返回服务器版本和虚拟主机名。</td></tr><tr><td>$_SERVER[‘PATH_TRANSLATED’]</td><td>当前脚本所在文件系统（非文档根目录）的基本路径。</td></tr><tr><td>$_SERVER[‘SCRIPT_NAME’]</td><td>返回当前脚本的路径。</td></tr><tr><td>$_SERVER[‘SCRIPT_URI’]</td><td>返回当前页面的 URI。</td></tr></tbody></table><h3 id="GET"><a href="#GET" class="headerlink" title="$_GET"></a>$_GET</h3><p>$_GET 变量用于收集来自 method=”get” 的表单中的值。从带有 GET 方法的表单发送的信息，对任何人都是可见的（会显示在浏览器的地址栏），并且对发送信息的量也有限制。</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>hello.php<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>get<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    名字: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    年龄: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>age<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>提交<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>hello.php文件</p><pre class=" language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span>  <span class="token keyword">echo</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">echo</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string">'age'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token delimiter">?></span></code></pre><h3 id="POST"><a href="#POST" class="headerlink" title="$_POST"></a>$_POST</h3><p>$_POST 变量用于收集来自 method=”post” 的表单中的值。从带有 POST 方法的表单发送的信息，对任何人都是不可见的（不会显示在浏览器的地址栏），并且对发送信息的量也没有限制。<strong>注释：</strong>然而，默认情况下，POST 方法的发送信息的量最大值为 8 MB（可通过设置 php.ini 文件中的 post_max_size 进行更改）</p><h3 id="REQUEST"><a href="#REQUEST" class="headerlink" title="$_REQUEST"></a>$_REQUEST</h3><p>$_REQUEST 变量包含了 $_GET、$_POST 和 $_COOKIE 的内容。$_REQUEST 变量可用来收集通过 GET 和 POST 方法发送的表单数据。但是$_REQUEST比较慢。通过POST和GET方法提交的所有数据都可以通过$_REQUEST数组获得</p><h3 id="SESSION"><a href="#SESSION" class="headerlink" title="$_SESSION"></a>$_SESSION</h3><p>存储和取回 session 变量</p><p>在您把用户信息存储到 PHP session 中之前，首先必须启动会话。</p><p><strong>注释：</strong>session_start() 函数必须位于 &lt;html&gt; 标签之前</p><pre class=" language-php+HTML"><code class="language-php+HTML"><?phpsession_start();// 存储 session 数据$_SESSION['page']=6;?><html><head><meta charset="utf-8"><title>Chihiro</title></head><body><?php// 检索 session 数据echo "页数：". $_SESSION['page'];?></body></html></code></pre><p>如果您希望删除某些 session 数据，可以使用 unset() 或 session_destroy() 函数。session_destroy() 将重置 session，您将失去所有已存储的 session 数据。</p><pre class=" language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span><span class="token function">session_start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isset</span><span class="token punctuation">(</span><span class="token variable">$_SESSION</span><span class="token punctuation">[</span><span class="token string">'page'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token function">unset</span><span class="token punctuation">(</span><span class="token variable">$_SESSION</span><span class="token punctuation">[</span><span class="token string">'page'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token delimiter">?></span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">=</span>手动分割<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">=</span><span class="token delimiter">&lt;?php</span><span class="token function">session_destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token delimiter">?></span></code></pre><h3 id="FILES"><a href="#FILES" class="headerlink" title="$_FILES"></a>$_FILES</h3><p>通过 PHP，可以把文件上传到服务器。</p><p>第一个参数是表单的 input name，第二个下标可以是 “name”, “type”, “size”, “tmp_name” 或 “error”。就像这样：</p><ul><li>$_FILES[“file”][“name”] - 被上传文件的名称</li><li>$_FILES[“file”][“type”] - 被上传文件的类型</li><li>$_FILES[“file”][“size”] - 被上传文件的大小，以字节计</li><li>$_FILES[“file”][“tmp_name”] - 存储在服务器的文件的临时副本的名称</li><li>$_FILES[“file”][“error”] - 由文件上传导致的错误代码</li></ul><p>示例：</p><pre class=" language-php+HTML"><code class="language-php+HTML"></code></pre><h2 id="define"><a href="#define" class="headerlink" title="define()"></a>define()</h2><p> 函数定义一个常量</p><p>常量类似变量，不同之处在于：</p><ul><li>在设定以后，常量的值无法更改</li><li>常量名不需要开头的美元符号 ($)</li><li>作用域不影响对常量的访问</li><li>常量值只能是字符串或数字</li></ul><p>语法:</p><pre class=" language-php"><code class="language-php"><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'常量名'</span><span class="token punctuation">,</span><span class="token string">'常量的值'</span><span class="token punctuation">,</span>规定常量的名称是否对大小写敏感<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token boolean">true</span><span class="token operator">/</span><span class="token boolean">false</span><span class="token punctuation">)</span></code></pre><h2 id="include"><a href="#include" class="headerlink" title="include()"></a>include()</h2><h2 id="require"><a href="#require" class="headerlink" title="require()"></a>require()</h2><p><strong>include 和 require 除了处理错误的方式不同之外，在其他方面都是相同的：</strong></p><ul><li>require 生成一个致命错误（E_COMPILE_ERROR），在错误发生后脚本会停止执行。一般放在 PHP 文件的最前面，程序在执行前就会先导入要引用的文件；</li><li>include 生成一个警告（E_WARNING），在错误发生后脚本会继续执行。一般放在程序的流程控制中，当程序执行时碰到才会引用，简化程序的执行流程</li><li><strong>require_once</strong> 语句和 require 语句完全相同，唯一区别是 PHP 会检查该文件是否已经被包含过，如果是则不会再次包含，只加载文件一次。</li><li><strong>include_once</strong>语句在脚本执行期间包含并运行指定文件。此行为和  <a href="https://www.php.net/manual/zh/function.include.php" target="_blank" rel="noopener">include</a>  语句类似，唯一区别是如果该文件中已经被包含过，则不会再次包含。如同此语句名字暗示的那样，只会包含一次</li></ul><p>语法：</p><pre class=" language-php"><code class="language-php"><span class="token keyword">include</span> <span class="token string">'filename'</span><span class="token punctuation">;</span><span class="token keyword">require</span> <span class="token string">'filename'</span><span class="token punctuation">;</span></code></pre><h2 id="php-uname"><a href="#php-uname" class="headerlink" title="php_uname()"></a>php_uname()</h2><p>php_uname()返回了运行 PHP 的操作系统的描述</p><p>说明：</p><pre class=" language-php"><code class="language-php"><span class="token function">php_uname</span> <span class="token punctuation">(</span><span class="token punctuation">[</span> string <span class="token variable">$mode</span> <span class="token operator">=</span> <span class="token string">"a"</span> <span class="token punctuation">]</span> <span class="token punctuation">)</span></code></pre><pre><code>mode</code></pre><p>​    <strong>mode</strong> 是单个字符，用于定义要返回什么信息：       </p><ul><li><em>‘a’*：此为默认。包含序列 *”s n r v m”</em> 里的所有模式。 </li><li><em>‘s’</em>：操作系统名称。例如：Linux。                 </li><li><em>‘n’</em>：主机名。例如：          <em>localhost.example.com</em>。                 </li><li><em>‘r’</em>：版本名称，例如：          <em>5.1.2-RELEASE</em>。                 </li><li><em>‘v’</em>：版本信息。操作系统之间有很大的不同。                 </li><li><em>‘m’</em>：机器类型。例如：<em>i386</em>。                 </li></ul><p>示例：</p><pre class=" language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span><span class="token keyword">echo</span> <span class="token function">php_uname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">echo</span> <span class="token string">"\n"</span><span class="token punctuation">;</span><span class="token keyword">echo</span> <span class="token constant">PHP_OS</span><span class="token punctuation">;</span> <span class="token shell-comment comment">#只是获取操作系统的名称，可以考虑使用常量PHP_OS</span><span class="token delimiter">?></span><span class="token comment" spellcheck="true">//运行结果</span>Linux parrot <span class="token number">5.5</span><span class="token punctuation">.</span><span class="token number">0</span><span class="token operator">-</span>1parrot1<span class="token operator">-</span>amd64 <span class="token shell-comment comment">#1 SMP Parrot 5.5.17-1parrot1 (2020-04-25) x86_64</span>Linux</code></pre><h2 id="stristr"><a href="#stristr" class="headerlink" title="stristr()"></a>stristr()</h2><p>搜索字符串在另一字符串中的第一次出现。</p><p>语法：</p><pre class=" language-php"><code class="language-php"><span class="token function">stristr</span><span class="token punctuation">(</span>string<span class="token punctuation">,</span>search<span class="token punctuation">,</span>before_search<span class="token punctuation">)</span></code></pre><table><thead><tr><th>参数</th><th>描述</th></tr></thead><tbody><tr><td><em>string</em></td><td>必需。规定被搜索的字符串。</td></tr><tr><td><em>search</em></td><td>必需。规定要搜索的字符串。 如果该参数是数字，则搜索匹配该数字对应的 ASCII 值的字符。</td></tr><tr><td><em>before_search</em></td><td>可选。默认值为 “false” 的布尔值。 如果设置为 “true”，它将返回 <em>search</em> 参数第一次出现之前的字符串部分。</td></tr></tbody></table><p>例子 1</p><p>以 “o” 的 ASCII 值搜索字符串，并返回字符串的剩余部分：</p><pre class=" language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span><span class="token keyword">echo</span> <span class="token function">stristr</span><span class="token punctuation">(</span><span class="token string">"Hello world!"</span><span class="token punctuation">,</span><span class="token number">111</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token delimiter">?></span><span class="token comment" spellcheck="true">//运行结果</span>o world<span class="token operator">!</span></code></pre><p>例子 2</p><p>返回 “world” 第一次出现之前的字符串部分：</p><pre class=" language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span><span class="token keyword">echo</span> <span class="token function">stristr</span><span class="token punctuation">(</span><span class="token string">"Hello world!"</span><span class="token punctuation">,</span><span class="token string">"WORLD"</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token delimiter">?></span><span class="token comment" spellcheck="true">//运行结果</span>Hello </code></pre><h2 id="stripos"><a href="#stripos" class="headerlink" title="stripos()"></a>stripos()</h2><p>查找字符串在另一字符串中第一次出现的位置（不区分大小写）。</p><p>示例：</p><pre class=" language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span><span class="token variable">$a</span> <span class="token operator">=</span> <span class="token string">'192.168.31.58'</span><span class="token punctuation">;</span><span class="token keyword">echo</span> <span class="token function">stripos</span><span class="token punctuation">(</span><span class="token string">"192.168.31.66"</span><span class="token punctuation">,</span><span class="token string">"6"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token delimiter">?></span><span class="token comment" spellcheck="true">//运行结果</span><span class="token number">5</span></code></pre><h2 id="strrpos"><a href="#strrpos" class="headerlink" title="strrpos()"></a>strrpos()</h2><p>计算指定字符串在目标字符串中最后一次出现的位置</p><p>示例：</p><pre class=" language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span><span class="token keyword">echo</span> <span class="token function">strrpos</span><span class="token punctuation">(</span><span class="token string">"hello word;hello world"</span><span class="token punctuation">,</span><span class="token string">"w"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token delimiter">?></span><span class="token comment" spellcheck="true">//运行结果</span><span class="token number">17</span></code></pre><h2 id="strtolower"><a href="#strtolower" class="headerlink" title="strtolower()"></a>strtolower()</h2><p>把所有字符转换为小写。</p><p>示例：</p><pre class=" language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span><span class="token keyword">echo</span> <span class="token function">strtolower</span><span class="token punctuation">(</span><span class="token string">"Hello WORLD."</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token delimiter">?></span><span class="token comment" spellcheck="true">//运行结果</span>hello world<span class="token punctuation">.</span></code></pre><h2 id="shell-exec"><a href="#shell-exec" class="headerlink" title="shell_exec()"></a>shell_exec()</h2><p>shell_exec()函数是PHP中的一个内置函数，用于通过shell执行命令并以字符串的形式返回完整的输出。</p><pre class=" language-php"><code class="language-php"><span class="token function">shell_exec</span><span class="token punctuation">(</span> <span class="token variable">$cmd</span> <span class="token punctuation">)</span></code></pre><p>参数：此函数接受单个参数$cmd，该参数用于保存将要执行的命令。</p><p>返回值：此函数返回已执行的命令，如果发生错误则返回NULL。</p><p>注意：当PHP以安全模式运行时，将禁用此功能。</p><p>示例：</p><pre class=" language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span><span class="token variable">$cmd</span> <span class="token operator">=</span> <span class="token function">shell_exec</span><span class="token punctuation">(</span><span class="token string">"ls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">echo</span> <span class="token variable">$cmd</span><span class="token punctuation">;</span><span class="token delimiter">?></span><span class="token comment" spellcheck="true">//运行结果</span>hello<span class="token punctuation">.</span>htmlhello<span class="token punctuation">.</span>php</code></pre><p>可以使用使用如下命令连接符号来拼接自己的命令</p><table><thead><tr><th>符号</th><th>说明</th></tr></thead><tbody><tr><td>A;B</td><td>A 不论正确与否都会执行 B 命令</td></tr><tr><td>A&amp;B</td><td>A 后台运行，A 和 B 同时执行</td></tr><tr><td>A&amp;&amp;B</td><td>A 执行成功时候才会执行 B 命令</td></tr><tr><td>A|B</td><td>A 执行的输出结果，作为 B 命令的参数，A 不论正确与否都会执行 B 命令</td></tr><tr><td>A||B</td><td>A 执行失败后才会执行 B 命令</td></tr></tbody></table><h2 id="array-keys"><a href="#array-keys" class="headerlink" title="array_keys()"></a>array_keys()</h2><p>返回包含数组中所有键名的一个新数组：</p><p>示例：</p><pre class=" language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span><span class="token variable">$a</span><span class="token operator">=</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token operator">=</span><span class="token operator">></span><span class="token string">"Chihiro"</span><span class="token punctuation">,</span><span class="token string">"age"</span><span class="token operator">=</span><span class="token operator">></span><span class="token string">"18"</span><span class="token punctuation">,</span><span class="token string">"color"</span><span class="token operator">=</span><span class="token operator">></span><span class="token string">"red"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">print_r</span><span class="token punctuation">(</span><span class="token function">array_keys</span><span class="token punctuation">(</span><span class="token variable">$a</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token delimiter">?></span> <span class="token comment" spellcheck="true">//运行结果</span><span class="token keyword">Array</span><span class="token punctuation">(</span>    <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span><span class="token operator">></span> name    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span><span class="token operator">></span> age    <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span><span class="token operator">></span> color<span class="token punctuation">)</span></code></pre><p>可以用来过滤多个危险字符</p><pre class=" language-php"><code class="language-php"><span class="token variable">$substitutions</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span>  <span class="token string">'&amp;&amp;'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">''</span><span class="token punctuation">,</span>  <span class="token string">';'</span>  <span class="token operator">=</span><span class="token operator">></span> <span class="token string">''</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 移除黑名单字符</span><span class="token variable">$target</span> <span class="token operator">=</span> <span class="token function">str_replace</span><span class="token punctuation">(</span> <span class="token function">array_keys</span><span class="token punctuation">(</span> <span class="token variable">$substitutions</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token variable">$substitutions</span><span class="token punctuation">,</span> <span class="token variable">$target</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="explode"><a href="#explode" class="headerlink" title="explode()"></a>explode()</h2><p>explode() 函数把字符串打散为数组。</p><p>语法：</p><pre class=" language-php"><code class="language-php"><span class="token function">explode</span><span class="token punctuation">(</span>separator<span class="token punctuation">,</span>string<span class="token punctuation">,</span>limit<span class="token punctuation">)</span></code></pre><table><thead><tr><th>参数</th><th>描述</th></tr></thead><tbody><tr><td>separator</td><td>必需。规定在哪里分割字符串。</td></tr><tr><td>string</td><td>必需。要分割的字符串。</td></tr><tr><td>limit</td><td>可选。规定所返回的数组元素的数目。 可能的值：  大于 0 - 返回包含最多 <em>limit</em> 个元素的数组 小于 0 - 返回包含除了最后的 -<em>limit</em> 个元素以外的所有元素的数组 0 - 返回包含一个元素的数组</td></tr></tbody></table><p>示例：</p><pre class=" language-php"><code class="language-php"><span class="token comment" spellcheck="true">//以.作为分割符号。分割$a</span><span class="token delimiter">&lt;?php</span><span class="token variable">$a</span> <span class="token operator">=</span> <span class="token string">'192.168.31.58'</span><span class="token punctuation">;</span><span class="token function">print_r</span><span class="token punctuation">(</span><span class="token function">explode</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">,</span><span class="token variable">$a</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token delimiter">?></span><span class="token comment" spellcheck="true">//运行结果</span><span class="token keyword">Array</span><span class="token punctuation">(</span>    <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token number">192</span>    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token number">168</span>    <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token number">31</span>    <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token number">58</span><span class="token punctuation">)</span></code></pre><h2 id="is-numeric"><a href="#is-numeric" class="headerlink" title="is_numeric()"></a>is_numeric()</h2><p>检测变量是否为数字或数字字符串</p><p>描述：</p><pre class=" language-php"><code class="language-php"><span class="token function">is_numeric</span> <span class="token punctuation">(</span> mixed <span class="token variable">$var</span> <span class="token punctuation">)</span></code></pre><p>如果 <code>var</code> 是数字和数字字符串则返回 <strong><code>TRUE</code></strong>，否则返回 <strong><code>FALSE</code></strong>。</p><p>示例：</p><pre class=" language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span><span class="token variable">$a</span> <span class="token operator">=</span> <span class="token string">'192.168.31.58'</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">is_numeric</span><span class="token punctuation">(</span><span class="token variable">$a</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token function">is_numeric</span><span class="token punctuation">(</span><span class="token variable">$a</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">echo</span> <span class="token string">"Welcome"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token delimiter">?></span><span class="token comment" spellcheck="true">//运行结果</span>Welcome</code></pre><h2 id="sizeof"><a href="#sizeof" class="headerlink" title="sizeof()"></a>sizeof()</h2><p>返回数组中元素的数目。</p><p>示例：</p><pre class=" language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span><span class="token variable">$a</span> <span class="token operator">=</span> <span class="token string">'192.168.31.58'</span><span class="token punctuation">;</span><span class="token variable">$b</span> <span class="token operator">=</span> <span class="token function">explode</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">,</span><span class="token variable">$a</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">echo</span> <span class="token function">sizeof</span><span class="token punctuation">(</span><span class="token variable">$b</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token delimiter">?></span><span class="token comment" spellcheck="true">//运行结果</span><span class="token number">4</span></code></pre><h2 id="substr"><a href="#substr" class="headerlink" title="substr()"></a>substr()</h2><p>截取字符串。</p><p>语法</p><pre class=" language-php"><code class="language-php"><span class="token function">substr</span><span class="token punctuation">(</span>string<span class="token punctuation">,</span>start<span class="token punctuation">,</span>length<span class="token punctuation">)</span></code></pre><table><thead><tr><th>参数</th><th>描述</th></tr></thead><tbody><tr><td><em>string</em></td><td>必需。规定要返回其中一部分的字符串。</td></tr><tr><td><em>start</em></td><td>必需。规定在字符串的何处开始。  正数 - 在字符串的指定位置开始 负数 - 在从字符串结尾开始的指定位置开始 0 - 在字符串中的第一个字符处开始</td></tr><tr><td><em>length</em></td><td>可选。规定被返回字符串的长度。默认是直到字符串的结尾。  正数 - 从 <em>start</em> 参数所在的位置返回的长度 负数 - 从字符串末端返回的长度</td></tr></tbody></table><p>示例：</p><pre class=" language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span> <span class="token variable">$str</span> <span class="token operator">=</span> <span class="token string">"hello word"</span><span class="token punctuation">;</span> <span class="token keyword">echo</span> <span class="token function">substr</span><span class="token punctuation">(</span><span class="token variable">$str</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">echo</span> <span class="token string">"\n"</span><span class="token punctuation">;</span> <span class="token keyword">echo</span> <span class="token function">substr</span><span class="token punctuation">(</span><span class="token variable">$str</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token delimiter">?></span><span class="token comment" spellcheck="true">//运行结果</span>llolo word</code></pre><h2 id="getimagesize"><a href="#getimagesize" class="headerlink" title="getimagesize()"></a>getimagesize()</h2><p>用于获取图像大小及相关信息，成功返回一个数组，失败则返回 FALSE 并产生一条 E_WARNING 级的错误信息。</p><h2 id="uniqid"><a href="#uniqid" class="headerlink" title="uniqid()"></a>uniqid()</h2><p>uniqid() 函数基于以微秒计的当前时间，生成一个唯一的 ID。</p><p>语法</p><pre class=" language-php"><code class="language-php"><span class="token function">uniqid</span><span class="token punctuation">(</span>prefix<span class="token punctuation">,</span>more_entropy<span class="token punctuation">)</span></code></pre><table><thead><tr><th>参数</th><th>描述</th></tr></thead><tbody><tr><td><em>prefix</em></td><td>可选。为 ID 规定前缀。如果两个脚本恰好在相同的微秒生成 ID，该参数很有用。</td></tr><tr><td><em>more_entropy</em></td><td>可选。规定位于返回值末尾的更多的熵。</td></tr></tbody></table><p>示例：</p><pre class=" language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span><span class="token keyword">echo</span> <span class="token function">uniqid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">echo</span> <span class="token string">"\n"</span><span class="token punctuation">;</span><span class="token keyword">echo</span> <span class="token function">uniqid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token delimiter">?></span><span class="token comment" spellcheck="true">//运行结果</span>5edb179e0cceb5edb179e0ccf8</code></pre>]]></content>
      
      
      <categories>
          
          <category> Others </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 编程 </tag>
            
            <tag> 函数 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
